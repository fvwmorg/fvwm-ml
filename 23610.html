<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>Re: FVWM: Titles in fvwmpager 2.1.10...??? from Andreas Dischinger on 1999-02-10 (fvwm-users)</title>
<meta name="Author" content="Andreas Dischinger (disching_at_fmi.uni-passau.de)" />
<meta name="Subject" content="Re: FVWM: Titles in fvwmpager 2.1.10...???" />
<meta name="Date" content="1999-02-10" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<h1>Re: FVWM: Titles in fvwmpager 2.1.10...???</h1>
<!-- received="Wed Feb 10 02:19:37 1999" -->
<!-- isoreceived="19990210021937" -->
<!-- sent="Wed, 10 Feb 1999 07:57:22 +0100 (MET)" -->
<!-- isosent="19990210065722" -->
<!-- name="Andreas Dischinger" -->
<!-- email="disching_at_fmi.uni-passau.de" -->
<!-- subject="Re: FVWM: Titles in fvwmpager 2.1.10...???" -->
<!-- id="199902100657.HAA29416_at_ravel.fmi.uni-passau.de" -->
<!-- charset="us-ascii" -->
<!-- inreplyto="Pine.GSO.4.05.9902091634340.22244-100000_at_shire.middleearth.net" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start23610" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="23611.html" accesskey="d" title="Dominik Vogt: &quot;Re: FVWM: Titles in fvwmpager 2.1.10...???&quot;">Next message</a> ]
[ <a href="23609.html" title="Philip Hallstrom: &quot;FVWM: Titles in fvwmpager 2.1.10...???&quot;">Previous message</a> ]
[ <a href="23609.html" title="Philip Hallstrom: &quot;FVWM: Titles in fvwmpager 2.1.10...???&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="23611.html" accesskey="t" title="Dominik Vogt: &quot;Re: FVWM: Titles in fvwmpager 2.1.10...???&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#msg23610" title="Contemporary messages by date">by date</a> ] [ <a href="index.html#msg23610" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg23610" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg23610" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Andreas Dischinger &lt;<a href="mailto:disching_at_fmi.uni-passau.de?Subject=Re%3A%20FVWM%3A%20Titles%20in%20fvwmpager%202.1.10...%3F%3F%3F">disching_at_fmi.uni-passau.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Wed, 10 Feb 1999 07:57:22 +0100 (MET)</span><br />
</address>
<br />
Hi Philip,
<br />
<br />the pager only displays the icon names of the windows in its
<br />
balloons. This is a known bug in 2.1.x. Domonik toldd me, it will be
<br />
fixed in 2.2 series. If you want to fix it, apply this patch. It
<br />
although updates the manpage of the pager. Look for
<br />
FvwmPagerBalloonStringFormat and FvwmPagerWindowLabelFormat.
<br />
<br />Andreas
<br />
<br />--8&lt;----------------------------------------------
<br />
diff -cr fvwm-2.1.10.orig/modules/FvwmPager/FvwmPager.1 fvwm-2.1.10/modules/FvwmPager/FvwmPager.1
<br />
*** fvwm-2.1.10.orig/modules/FvwmPager/FvwmPager.1	Sat Dec 12 02:33:14 1998
<br />
--- fvwm-2.1.10/modules/FvwmPager/FvwmPager.1	Fri Jan 22 11:07:01 1999
<br />
***************
<br />
*** 170,175 ****
<br />
--- 170,181 ----
<br />
&nbsp;&nbsp;Change the normal/highlight colors of the windows. \fIfore\fP and
<br />
&nbsp;&nbsp;\fIhiFore\fP specify the colors as used for the font inside the windows.
<br />
&nbsp;&nbsp;\fIback\fP and \fIhiBack\fP are used to fill the windows with.
<br />
+ 
<br />
+ .IP &quot;*FvwmPagerWindowLabelFormat \fIformat\fP&quot;
<br />
+ This specifies a printf() like format for the labels in the mini window.
<br />
+ Possible flags are: %t, %i, %c, and %r for the window's title, icon, class,
<br />
+ or resource name, respectively.  The default is &quot;%i&quot;.
<br />
+ 
<br />
&nbsp;&nbsp;.IP &quot;*FvwmPagerLabel \fIdesk label\fP&quot;
<br />
&nbsp;&nbsp;Assigns the text \fIlabel\fP to desk \fIdesk\fP (or the current desk
<br />
&nbsp;&nbsp;if desk is &quot;*&quot;) in the pager window. Useful for assigning symbolic names
<br />
***************
<br />
*** 236,241 ****
<br />
--- 242,250 ----
<br />
&nbsp;&nbsp;loop. Defaults to +2. The offset will change sign automatically, as needed,
<br />
&nbsp;&nbsp;to keep the balloon on the screen.
<br />
&nbsp;&nbsp;
<br />
+ .IP &quot;*FvwmPagerBalloonStringFormat \fTformat\fP&quot;
<br />
+ The same as \fI*FvwmPagerWindowLabelFormat\fP, it just specifies the string to
<br />
+ display in the balloons.
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;.SH AUTHOR
<br />
&nbsp;&nbsp;Robert Nation 
<br />
diff -cr fvwm-2.1.10.orig/modules/FvwmPager/FvwmPager.c fvwm-2.1.10/modules/FvwmPager/FvwmPager.c
<br />
*** fvwm-2.1.10.orig/modules/FvwmPager/FvwmPager.c	Sun Jan 10 22:00:03 1999
<br />
--- fvwm-2.1.10/modules/FvwmPager/FvwmPager.c	Fri Jan 22 11:13:24 1999
<br />
***************
<br />
*** 70,75 ****
<br />
--- 70,76 ----
<br />
&nbsp;&nbsp;char *WindowFore = NULL;
<br />
&nbsp;&nbsp;char *WindowHiBack = NULL;
<br />
&nbsp;&nbsp;char *WindowHiFore = NULL;
<br />
+ char *WindowLabelFormat = NULL;
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;int ShowBalloons = 0, ShowPagerBalloons = 0, ShowIconBalloons = 0;
<br />
&nbsp;&nbsp;char *BalloonTypeString = NULL;
<br />
***************
<br />
*** 77,82 ****
<br />
--- 78,84 ----
<br />
&nbsp;&nbsp;char *BalloonFore = NULL;
<br />
&nbsp;&nbsp;char *BalloonFont = NULL;
<br />
&nbsp;&nbsp;char *BalloonBorderColor = NULL;
<br />
+ char *BalloonFormatString = NULL;
<br />
&nbsp;&nbsp;int BalloonBorderWidth = 1;
<br />
&nbsp;&nbsp;int BalloonYOffset = 2;
<br />
&nbsp;&nbsp;
<br />
***************
<br />
*** 190,199 ****
<br />
--- 192,203 ----
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;PagerFore = strdup(&quot;black&quot;);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;PagerBack = strdup(&quot;white&quot;);
<br />
+   WindowLabelFormat = strdup(&quot;%i&quot;);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;font_string = strdup(&quot;fixed&quot;);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;HilightC = strdup(&quot;black&quot;);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;BalloonFont = strdup(&quot;fixed&quot;);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;BalloonBorderColor = strdup(&quot;black&quot;);
<br />
+   BalloonTypeString = strdup(&quot;%i&quot;);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;Desks = (DeskInfo *)safemalloc(ndesks*sizeof(DeskInfo));
<br />
&nbsp;&nbsp;&nbsp;&nbsp;for(i=0;i&lt;ndesks;i++)
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br />
***************
<br />
*** 236,241 ****
<br />
--- 240,248 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M_ICONIFY|
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M_ICON_LOCATION|
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M_DEICONIFY|
<br />
+ 		 M_RES_NAME|
<br />
+ 		 M_RES_CLASS|
<br />
+ 		 M_WINDOW_NAME|
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M_ICON_NAME|
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M_CONFIG_INFO|
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M_END_CONFIG_INFO|
<br />
***************
<br />
*** 326,331 ****
<br />
--- 333,343 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case M_DEICONIFY:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_deiconify(body);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
<br />
+     case M_RES_CLASS:
<br />
+     case M_RES_NAME:
<br />
+     case M_WINDOW_NAME:
<br />
+       list_window_name(body,type);
<br />
+       break;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case M_ICON_NAME:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_icon_name(body);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
<br />
***************
<br />
*** 394,399 ****
<br />
--- 406,415 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;(*prev)-&gt;icon_view_width = 0;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;(*prev)-&gt;icon_view_height = 0;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;(*prev)-&gt;icon_name = NULL;
<br />
+   (*prev)-&gt;window_name = NULL;
<br />
+   (*prev)-&gt;res_name = NULL;
<br />
+   (*prev)-&gt;res_class = NULL;
<br />
+   (*prev)-&gt;window_label = NULL;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;(*prev)-&gt;mini_icon.picture = 0;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;(*prev)-&gt;title_height = body[9];
<br />
&nbsp;&nbsp;&nbsp;&nbsp;(*prev)-&gt;border_width = body[10];
<br />
***************
<br />
*** 812,817 ****
<br />
--- 828,868 ----
<br />
&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;
<br />
+ void list_window_name(unsigned long *body,unsigned long type)
<br />
+ {
<br />
+   PagerWindow *t;
<br />
+   Window target_w;
<br />
+ 
<br />
+   target_w = body[0];
<br />
+   t = Start;
<br />
+   while((t!= NULL)&amp;&amp;(t-&gt;w != target_w))
<br />
+     {
<br />
+       t = t-&gt;next;
<br />
+     }
<br />
+   if(t!= NULL)
<br />
+     {
<br />
+       switch (type) {
<br />
+       case M_RES_CLASS:
<br />
+         if(t-&gt;res_class != NULL)
<br />
+           free(t-&gt;res_class);
<br />
+         CopyString(&amp;t-&gt;res_class,(char *)(&amp;body[3]));
<br />
+         break;
<br />
+       case M_RES_NAME:
<br />
+         if(t-&gt;res_name != NULL)
<br />
+           free(t-&gt;res_name);
<br />
+         CopyString(&amp;t-&gt;res_name,(char *)(&amp;body[3]));
<br />
+         break;
<br />
+       case M_WINDOW_NAME:
<br />
+         if(t-&gt;window_name != NULL)
<br />
+           free(t-&gt;window_name);
<br />
+         CopyString(&amp;t-&gt;window_name,(char *)(&amp;body[3]));
<br />
+         break;
<br />
+       }
<br />
+       LabelWindow(t);
<br />
+       LabelIconWindow(t);
<br />
+     }
<br />
+ }
<br />
+ 
<br />
&nbsp;&nbsp;/***********************************************************************
<br />
&nbsp;&nbsp;&nbsp;*
<br />
&nbsp;&nbsp;&nbsp;*  Procedure:
<br />
***************
<br />
*** 1235,1241 ****
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetNextToken(tline2, &amp;WindowHiBack);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
! 
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* ... and get Balloon config options ...
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- ric_at_giccs.georgetown.edu */
<br />
--- 1286,1297 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetNextToken(tline2, &amp;WindowHiBack);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
!        else if (StrEquals(resource,&quot;WindowLabelFormat&quot;))
<br />
!          {
<br />
!            if (WindowLabelFormat)
<br />
!              free(WindowLabelFormat);
<br />
!            CopyString(&amp;WindowLabelFormat,arg1);
<br />
!          }
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* ... and get Balloon config options ...
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- ric_at_giccs.georgetown.edu */
<br />
***************
<br />
*** 1307,1312 ****
<br />
--- 1363,1374 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sscanf(arg1, &quot;%d&quot;, &amp;BalloonYOffset);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
+       else if (StrEquals(resource,&quot;BalloonStringFormat&quot;))
<br />
+          {
<br />
+            if (BalloonFormatString)
<br />
+              free(BalloonFormatString);
<br />
+            CopyString(&amp;BalloonFormatString,arg1);
<br />
+           }
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(resource);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(arg1);
<br />
diff -cr fvwm-2.1.10.orig/modules/FvwmPager/FvwmPager.h fvwm-2.1.10/modules/FvwmPager/FvwmPager.h
<br />
*** fvwm-2.1.10.orig/modules/FvwmPager/FvwmPager.h	Wed Dec  9 00:40:57 1998
<br />
--- fvwm-2.1.10/modules/FvwmPager/FvwmPager.h	Fri Jan 22 11:07:01 1999
<br />
***************
<br />
*** 55,60 ****
<br />
--- 55,64 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;Window icon_w;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;Window icon_pixmap_w;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;char *icon_name;
<br />
+   char *window_name;
<br />
+   char *res_name;
<br />
+   char *res_class;
<br />
+   char *window_label; /* This is displayed inside the mini window */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;Picture mini_icon;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;int pager_view_width;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;int pager_view_height;
<br />
***************
<br />
*** 73,78 ****
<br />
--- 77,83 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;Window w;              /* ID of balloon window */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;PagerWindow *pw;       /* pager window it's associated with */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;XFontStruct *font;
<br />
+   char *label;           /* the label displayed inside the balloon */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;int height;            /* height of balloon window based on font */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;int border;            /* border width */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;int yoffset;           /* pixels above (&lt;0) or below (&gt;0) pager win */
<br />
***************
<br />
*** 126,132 ****
<br />
&nbsp;&nbsp;void list_unknown(unsigned long *body);
<br />
&nbsp;&nbsp;void list_iconify(unsigned long *body);
<br />
&nbsp;&nbsp;void list_deiconify(unsigned long *body);
<br />
! void list_window_name(unsigned long *body);
<br />
&nbsp;&nbsp;void list_icon_name(unsigned long *body);
<br />
&nbsp;&nbsp;void list_class(unsigned long *body);
<br />
&nbsp;&nbsp;void list_res_name(unsigned long *body);
<br />
--- 131,137 ----
<br />
&nbsp;&nbsp;void list_unknown(unsigned long *body);
<br />
&nbsp;&nbsp;void list_iconify(unsigned long *body);
<br />
&nbsp;&nbsp;void list_deiconify(unsigned long *body);
<br />
! void list_window_name(unsigned long *body,unsigned long type);
<br />
&nbsp;&nbsp;void list_icon_name(unsigned long *body);
<br />
&nbsp;&nbsp;void list_class(unsigned long *body);
<br />
&nbsp;&nbsp;void list_res_name(unsigned long *body);
<br />
diff -cr fvwm-2.1.10.orig/modules/FvwmPager/x_pager.c fvwm-2.1.10/modules/FvwmPager/x_pager.c
<br />
*** fvwm-2.1.10.orig/modules/FvwmPager/x_pager.c	Wed Jan 13 00:27:39 1999
<br />
--- fvwm-2.1.10/modules/FvwmPager/x_pager.c	Fri Jan 22 11:15:25 1999
<br />
***************
<br />
*** 35,40 ****
<br />
--- 35,42 ----
<br />
&nbsp;&nbsp;extern int StartIconic;
<br />
&nbsp;&nbsp;extern int MiniIcons;
<br />
&nbsp;&nbsp;extern int ShowBalloons, ShowPagerBalloons, ShowIconBalloons;
<br />
+ extern char *BalloonFormatString;
<br />
+ extern char *WindowLabelFormat;
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;extern int icon_w, icon_h, icon_x, icon_y;
<br />
&nbsp;&nbsp;XFontStruct *font, *windowFont;
<br />
***************
<br />
*** 80,85 ****
<br />
--- 82,89 ----
<br />
&nbsp;&nbsp;Window		icon_win;               /* icon window */
<br />
&nbsp;&nbsp;BalloonWindow balloon;            /* balloon window */
<br />
&nbsp;&nbsp;
<br />
+ static char *GetBalloonLabel(const PagerWindow *pw,const char *fmt);
<br />
+ 
<br />
&nbsp;&nbsp;/***********************************************************************
<br />
&nbsp;&nbsp;&nbsp;*
<br />
&nbsp;&nbsp;&nbsp;*  Procedure:
<br />
***************
<br />
*** 1625,1635 ****
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XChangeGC(dpy, StdGC,Globalgcm,&amp;Globalgcv);
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;&nbsp;&nbsp;if(t-&gt;PagerView != None)
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XClearWindow(dpy, t-&gt;PagerView);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XDrawString (dpy, t-&gt;PagerView,StdGC,2,windowFont-&gt;ascent+2 ,
<br />
! 			t-&gt;icon_name, strlen(t-&gt;icon_name));
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;
<br />
--- 1629,1644 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XChangeGC(dpy, StdGC,Globalgcm,&amp;Globalgcv);
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
+   { /* Update the window label for this window */
<br />
+     if (t-&gt;window_label)
<br />
+       free(t-&gt;window_label);
<br />
+     t-&gt;window_label = GetBalloonLabel(t,WindowLabelFormat);
<br />
+   }
<br />
&nbsp;&nbsp;&nbsp;&nbsp;if(t-&gt;PagerView != None)
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XClearWindow(dpy, t-&gt;PagerView);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XDrawString (dpy, t-&gt;PagerView,StdGC,2,windowFont-&gt;ascent+2 ,
<br />
! 		        t-&gt;window_label, strlen(t-&gt;window_label));
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;
<br />
***************
<br />
*** 1667,1675 ****
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XChangeGC(dpy,StdGC,Globalgcm,&amp;Globalgcv);
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;&nbsp;&nbsp;XClearWindow(dpy, t-&gt;IconView);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;XDrawString (dpy, t-&gt;IconView,StdGC,2,windowFont-&gt;ascent+2 ,
<br />
! 	       t-&gt;icon_name, strlen(t-&gt;icon_name));
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;void PictureWindow (PagerWindow *t)
<br />
--- 1676,1689 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XChangeGC(dpy,StdGC,Globalgcm,&amp;Globalgcv);
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
+   { /* Update the window label for this window */
<br />
+     if (t-&gt;window_label)
<br />
+       free(t-&gt;window_label);
<br />
+     t-&gt;window_label = GetBalloonLabel(t,WindowLabelFormat);
<br />
+   }
<br />
&nbsp;&nbsp;&nbsp;&nbsp;XClearWindow(dpy, t-&gt;IconView);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;XDrawString (dpy, t-&gt;IconView,StdGC,2,windowFont-&gt;ascent+2 ,
<br />
! 	       t-&gt;window_label, strlen(t-&gt;window_label));
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;void PictureWindow (PagerWindow *t)
<br />
***************
<br />
*** 1924,1932 ****
<br />
&nbsp;&nbsp;&nbsp;&nbsp;/* associate balloon with its pager window */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;balloon.pw = t;
<br />
&nbsp;&nbsp;
<br />
!   /* calculate window width to accommodate string */
<br />
!   window_changes.width = 4 + XTextWidth(balloon.font, t-&gt;icon_name,
<br />
!                                         strlen(t-&gt;icon_name));
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;/* get x and y coords relative to pager window */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;x = (view_width / 2) - (window_changes.width / 2) - balloon.border;
<br />
--- 1938,1952 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;/* associate balloon with its pager window */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;balloon.pw = t;
<br />
&nbsp;&nbsp;
<br />
!   /* get the label for this balloon */
<br />
!   if (balloon.label)
<br />
!     free(balloon.label);
<br />
!   balloon.label = GetBalloonLabel(balloon.pw,BalloonFormatString);
<br />
! 
<br />
!   { /* calculate window width to accommodate string */
<br />
!     window_changes.width = 4 + XTextWidth(balloon.font,balloon.label,
<br />
!                                           strlen(balloon.label));
<br />
!   }
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;/* get x and y coords relative to pager window */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;x = (view_width / 2) - (window_changes.width / 2) - balloon.border;
<br />
***************
<br />
*** 1983,1988 ****
<br />
--- 2003,2059 ----
<br />
&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;
<br />
+ /* Generate the BallonLabel from the format string 
<br />
+    -- disching_at_fmi.uni-passau.de */
<br />
+ char *GetBalloonLabel(const PagerWindow *pw,const char *fmt)
<br />
+ {
<br />
+   char *dest = strdup(&quot;&quot;);
<br />
+   unsigned int allocSize = 0;
<br />
+   const unsigned int enlargeSize = 32;
<br />
+   const char *pos = fmt;
<br />
+   char buffer[2];
<br />
+ 
<br />
+   buffer[1] = '\0';
<br />
+ 
<br />
+ #define INSERT(s) while (strlen(s)+strlen(dest)+1&gt;allocSize) { \
<br />
+                     dest = realloc(dest,allocSize+enlargeSize); \
<br />
+                     allocSize += enlargeSize; \
<br />
+                   } \
<br />
+                   strcat(dest,s)
<br />
+ 
<br />
+   while (*pos) {
<br />
+     if (*pos=='%' &amp;&amp; *(pos+1)!='\0') {
<br />
+       pos++;
<br />
+       switch (*pos) {
<br />
+       case 'i':
<br />
+         INSERT(pw-&gt;icon_name);
<br />
+         break;
<br />
+       case 't':
<br />
+         INSERT(pw-&gt;window_name);
<br />
+         break;
<br />
+       case 'r':
<br />
+         INSERT(pw-&gt;res_name);
<br />
+         break;
<br />
+       case 'c':
<br />
+         INSERT(pw-&gt;res_class);
<br />
+         break;
<br />
+       case '%':
<br />
+         buffer[0] = '%';
<br />
+         INSERT(buffer);
<br />
+         break;
<br />
+       default:
<br />
+       }
<br />
+     } else {
<br />
+       buffer[0] = *pos;
<br />
+       INSERT(buffer);
<br />
+     }
<br />
+     pos++;
<br />
+   }
<br />
+ #undef INSERT
<br />
+   return dest;
<br />
+ }
<br />
+ 
<br />
+ 
<br />
&nbsp;&nbsp;/* -- ric_at_giccs.georgetown.edu */
<br />
&nbsp;&nbsp;void UnmapBalloonWindow (void)
<br />
&nbsp;&nbsp;{
<br />
***************
<br />
*** 2002,2006 ****
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;XDrawString(dpy, balloon.w, BalloonGC,
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2, balloon.font-&gt;ascent,
<br />
!               balloon.pw-&gt;icon_name, strlen(balloon.pw-&gt;icon_name));
<br />
&nbsp;&nbsp;}
<br />
--- 2073,2077 ----
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;XDrawString(dpy, balloon.w, BalloonGC,
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2, balloon.font-&gt;ascent,
<br />
!               balloon.label,strlen(balloon.label));
<br />
&nbsp;&nbsp;}
<br />
--8&lt;----------------------------------------------
<br />
<pre>
-- 
   //|       |\\
  //||       ||\\         <a href="http://degnet.de/~awd/">http://degnet.de/~awd/</a>
 //=||       ||//         email: disching_at_fmi.uni-passau.de
//  ||ndreas |//ischinger PGP-Key by finger.
Talking about my desk:
I just tell people that, as a programmer, I have an affinity for heap
storage...
--
Visit the official FVWM web page at &lt;URL: <a href="http://fvwm.math.uh.edu/">http://fvwm.math.uh.edu/</a>&gt;.
To unsubscribe from the list, send &quot;unsubscribe fvwm&quot; in the body of a
message to majordomo_at_hpc.uh.edu.
To report problems, send mail to fvwm-owner_at_hpc.uh.edu.
</pre>
<span id="received"><dfn>Received on</dfn> Wed Feb 10 1999 - 02:19:37 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start23610">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="23611.html" title="Next message in the list">Dominik Vogt: "Re: FVWM: Titles in fvwmpager 2.1.10...???"</a></li>
<li><dfn>Previous message</dfn>: <a href="23609.html" title="Previous message in the list">Philip Hallstrom: "FVWM: Titles in fvwmpager 2.1.10...???"</a></li>
<li><dfn>In reply to</dfn>: <a href="23609.html" title="Message to which this message replies">Philip Hallstrom: "FVWM: Titles in fvwmpager 2.1.10...???"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="23611.html" title="Next message in this discussion thread">Dominik Vogt: "Re: FVWM: Titles in fvwmpager 2.1.10...???"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="23611.html" title="Message sent in reply to this message">Dominik Vogt: "Re: FVWM: Titles in fvwmpager 2.1.10...???"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#msg23610" title="Contemporary messages by date">by date</a> ] [ <a href="index.html#msg23610" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg23610" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg23610" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Mon Aug 29 2016 - 19:38:02 BST
</em></small></p>
</body>
</html>
