<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>Re: FVWM: fvwm2/twm losing PS1 (environment experiment results) from Alexis Huxley on 1998-10-31 (fvwm-users)</title>
<meta name="Author" content="Alexis Huxley (alexis_at_danae.demon.co.uk)" />
<meta name="Subject" content="Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)" />
<meta name="Date" content="1998-10-31" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<h1>Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)</h1>
<!-- received="Sat Oct 31 08:07:14 1998" -->
<!-- isoreceived="19981031080714" -->
<!-- sent="Sat, 31 Oct 1998 11:17:55 +0000" -->
<!-- isosent="19981031111755" -->
<!-- name="Alexis Huxley" -->
<!-- email="alexis_at_danae.demon.co.uk" -->
<!-- subject="Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)" -->
<!-- id="19981031111755.A781_at_danae.demon.co.uk" -->
<!-- charset="us-ascii" -->
<!-- inreplyto="FVWM: fvwm2/twm losing PS1 (environment experiment results)" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start22953" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="22954.html" accesskey="d" title="/users/domivogt: &quot;Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)&quot;">Next message</a> ]
[ <a href="22952.html" title="Dominik Vogt: &quot;Re: FVWM: fvwm2/twm losing PS1 (unix prompt setting) !?&quot;">Previous message</a> ]
<!-- unextthread="start" -->
[ <a href="22954.html" accesskey="t" title="/users/domivogt: &quot;Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#msg22953" title="Contemporary messages by date">by date</a> ] [ <a href="index.html#msg22953" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg22953" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg22953" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Alexis Huxley &lt;<a href="mailto:alexis_at_danae.demon.co.uk?Subject=Re%3A%20FVWM%3A%20fvwm2%2Ftwm%20losing%20PS1%20(environment%20experiment%20results)">alexis_at_danae.demon.co.uk</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Sat, 31 Oct 1998 11:17:55 +0000</span><br />
</address>
<br />
Dominik Vogt &lt;dominik_vogt_at_hp.com&gt; said:
<br />
&nbsp;
<br />
<em class="quotelev1">&gt; My guess is that the reason for your problem is that
</em><br />
<em class="quotelev1">&gt; the xterm from inside the window manager is not started
</em><br />
<em class="quotelev1">&gt; in the correct environment. Nobody actually unsets PS1.
</em><br />
<em class="quotelev1">&gt; What you get is probably the default bash prompt because
</em><br />
<em class="quotelev1">&gt; PS1 is empty when the shell starts. Having a look at
</em><br />
<br />Well, PS1 isn't empty before I start, and it *is* exported :-(
<br />
<br /><em class="quotelev1">&gt; From the console set 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; foo=bar
</em><br />
<em class="quotelev1">&gt; export foo
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; and start X, fvwm2 and an X terminal, verify if foo is
</em><br />
<em class="quotelev1">&gt; still set and post the result.
</em><br />
<br />Ok, I tried it and the results are reproduced below. Summarising; PS1 is
<br />
still getting reset, but 'foo' makes it through without changes.
<br />
<br />Dominik, or somebody else, if you could please just try what I did, and get
<br />
the *right* results, then that would give me the impetus to keep digging with
<br />
this - right now I feel like I'm going insane! :-)
<br />
<br />If you could just move /etc/bashrc and all possibly relevent dot files out
<br />
of the way and do two runs as follows:
<br />
<br />PS1=&quot;myprompt&gt; &quot;
<br />
export PS1
<br />
xinit /usr/bin/X11/xterm
<br />
<br />[ when the xterm comes up do ]
<br />
<br />echo $PS1
<br />
<br />and the second run:
<br />
<br />PS1=&quot;myprompt&gt; &quot;
<br />
export PS1
<br />
xinit /usr/bin/X11/xterm
<br />
<br />[ when fvwm2 comes up do, start an xterm and when that comes up do ]
<br />
<br />echo $PS1
<br />
<br />I'd be very grateful, even if your results produce the right results unlike
<br />
mine.
<br />
<br />Ok, the rest of this post is the 'foo' experiment, coupled with a PS1
<br />
experiment:
<br />
<br />Preamble:
<br />
<br />$ id
<br />
uid=996(guest) gid=996(guest) groups=996(guest)
<br />
$ PS1=&quot;mynewprompt&gt; &quot;
<br />
mynewprompt&gt; export PS1
<br />
mynewprompt&gt; foo=bar
<br />
mynewprompt&gt; export foo
<br />
mynewprompt&gt; set &gt; /tmp/console.env
<br />
mynewprompt&gt; 
<br />
<br />Console environment:
<br />
<br />mynewprompt&gt; set | more
<br />
BASH=/bin/sh
<br />
BASH_VERSINFO=([0]=&quot;2&quot; [1]=&quot;01&quot; [2]=&quot;1&quot; [3]=&quot;1&quot; [4]=&quot;release&quot; [5]=&quot;i486-pc-linux-gnu&quot;)
<br />
BASH_VERSION='2.01.1(1)-release'
<br />
DIRSTACK=()
<br />
EUID=996
<br />
GROUPS=()
<br />
HISTFILE=/home/db/guest/.bash_history
<br />
HISTFILESIZE=500
<br />
HISTSIZE=500
<br />
HOME=/home/db/guest
<br />
HOSTNAME=danae
<br />
HOSTTYPE=i486
<br />
IFS='
<br />
'
<br />
LOGNAME=guest
<br />
MACHTYPE=i486-pc-linux-gnu
<br />
MAILCHECK=60
<br />
OPTERR=1
<br />
OPTIND=1
<br />
OSTYPE=linux-gnu
<br />
PATH=/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/games:/home/db/guest/bin:.
<br />
PIPESTATUS=([0]=&quot;0&quot;)
<br />
PPID=208
<br />
PS1='mynewprompt&gt; '
<br />
PS2='&gt; '
<br />
PS4='+ '
<br />
PWD=/diskb/home/guest
<br />
SHELL=/bin/sh
<br />
SHELLOPTS=braceexpand:hashall:histexpand:monitor:history:interactive-comments:emacs
<br />
SHLVL=1
<br />
TERM=linux
<br />
UID=996
<br />
USER=guest
<br />
_=id
<br />
foo=bar
<br />
<br />Xterm environment:
<br />
<br />running 'xinit /usr/bin/X11/xterm' and in the xterm running 
<br />
'set &gt; /tmp/xterm.env' and then diffing the environments:
<br />
<br />mynewprompt&gt; diff /tmp/console.env /tmp/xterm.env
<br />
4a5
<br />
<em class="quotelev1">&gt; DISPLAY=:0.0
</em><br />
22,23c23
<br />
&lt; PIPESTATUS=([0]=&quot;0&quot; [1]=&quot;0&quot;)
<br />
&lt; PPID=208
<br />
<pre>
---
&gt; PPID=906
30,31c30,31
&lt; SHLVL=1
&lt; TERM=linux
---
&gt; SHLVL=2
&gt; TERM=xterm
34c34,35
&lt; _=more
---
&gt; WINDOWID=8388622
&gt; _=sh
mynewprompt&gt;
running 'xinit /usr/bin/X11/fvwm2' and then starting an xterm and in the xterm 
running 'set &gt; /tmp/fvwm2.env' and then diffing the environments:
mynewprompt&gt; diff /tmp/console.env /tmp/fvwm2.env
4a5
&gt; DISPLAY=:0.0
10a12
&gt; HOSTDISPLAY=danae:0.0
22,24c24,25
&lt; PIPESTATUS=([0]=&quot;0&quot; [1]=&quot;0&quot;)
&lt; PPID=208
&lt; PS1='mynewprompt&gt; '
---
&gt; PPID=917
&gt; PS1='\s-\v\$ '
30,31c31,32
&lt; SHLVL=1
&lt; TERM=linux
---
&gt; SHLVL=3
&gt; TERM=xterm
34c35,36
&lt; _=more
---
&gt; WINDOWID=16777230
&gt; _=sh
mynewprompt&gt;
... and there is PS1 being set to it's the default (as mentioned in the 
bash man page), suggesting to me that it's *not* actully being explicitly
*set*, but rather explicitly *unset*.
I have no .profile, no .fvwm2rc, no .Xresource, no .bashrc. The is no
/etc/bashrc, but there is a /etc/profile, which sets PS1:
mynewprompt&gt; grep PS1 /etc/profile
PS1=&quot;\\$ &quot;
export PATH PS1
mynewprompt&gt;
But since I neither start off with that value, nor does it change to that 
in either the xinit'ed xterm or the xinit'ed-fvwm2'ed xterm, I don't believe
/etc/profile is getting sourced.
Going back to my process diagram tree:
                        login shell (I set PS1)
                             |
                          startx
                             |
                           xinit
                             |
           .xinitrc/.xsession/global-equivalents (PS1 still set)
                            /  \
                          /      \
                        /          \
                   fvwm2/twm      xterm (PS1 still set)
                       |            |
                xterm (PS1 lost)   bash (PS1 still set)
                       |
        bash (PS1 set to bash's default)
Notice that when .xinitrc is executing the environment is still set correctly,
but the two bashes under them, one is right and one is wrong. And the only
difference in the two branches is that one comes through fvwm2 and the other
doesn't. I'm convinced that it is something fvwm2 is doing - perhaps 
indirectly (sourcing some file I don't know about perhaps).
&gt; Bye
&gt; 
&gt; Dominik
Dominik, please, just for my sanity, could you move your dot-files out of the
way and try it? I mean, just to hear that someone had reproduced exactly 
what I have done and *didn't* get the same results would at least give me
the confidence to keep struggling with it.
Thanks!
Alexis
Alexis Huxley
alexis_at_danae.demon.co.uk
email key: 549812
--
Visit the official FVWM web page at &lt;URL:<a href="http://www.hpc.uh.edu/fvwm/">http://www.hpc.uh.edu/fvwm/</a>&gt;.
To unsubscribe from the list, send &quot;unsubscribe fvwm&quot; in the body of a
message to majordomo_at_hpc.uh.edu.
To report problems, send mail to fvwm-owner_at_hpc.uh.edu.
</pre>
<span id="received"><dfn>Received on</dfn> Sat Oct 31 1998 - 08:07:14 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start22953">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="22954.html" title="Next message in the list">/users/domivogt: "Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)"</a></li>
<li><dfn>Previous message</dfn>: <a href="22952.html" title="Previous message in the list">Dominik Vogt: "Re: FVWM: fvwm2/twm losing PS1 (unix prompt setting) !?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="22954.html" title="Next message in this discussion thread">/users/domivogt: "Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="22954.html" title="Message sent in reply to this message">/users/domivogt: "Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)"</a></li>
<li><dfn>Reply</dfn>: <a href="22955.html" title="Message sent in reply to this message">/users/domivogt: "Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)"</a></li>
<li><dfn>Maybe reply</dfn>: <a href="22960.html" title="Message sent in reply to this message">Paul D. Smith: "Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)"</a></li>
<li><dfn>Maybe reply</dfn>: <a href="22974.html" title="Message sent in reply to this message">Paul D. Smith: "Re: FVWM: fvwm2/twm losing PS1 (environment experiment results)"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#msg22953" title="Contemporary messages by date">by date</a> ] [ <a href="index.html#msg22953" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg22953" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg22953" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Mon Aug 29 2016 - 19:38:01 BST
</em></small></p>
</body>
</html>
