From owner-fvwm-workers@hpc.uh.edu  Fri Nov  7 17:24:09 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Fri, 07 Nov 1997 17:24:09 -0600 (CST)
Received: from Athena.McRCIM.McGill.EDU (root@Athena.McRCIM.McGill.EDU [132.206.4.20]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id RAA22434 for <fvwm-workers@hpc.uh.edu>; Fri, 7 Nov 1997 17:23:58 -0600 (CST)
Received: from Chart.McRCIM.McGill.EDU (uucp@Chart.McRCIM.McGill.EDU [132.206.4.7]) by 22398 on Athena.McRCIM.McGill.EDU (8.8.5) with ESMTP id SAA22398 for <hpc.uh.edu!fvwm-workers>; Fri, 7 Nov 1997 18:23:47 -0500 (EST)
Received: from hilbert.UUCP (uucp@localhost) by 3378 on Chart.McRCIM.McGill.EDU (8.8.5) with UUCP id SAA03378 for hpc.uh.edu!fvwm-workers; Fri, 7 Nov 1997 18:23:46 -0500 (EST)
Received: from localhost by hilbert.nyongwa.montreal.qc.ca
	via sendmail with smtp
	id <m0xTxP9-0000w1C@hilbert.nyongwa.montreal.qc.ca>
	for <fvwm-workers@hpc.uh.edu>; Fri, 7 Nov 1997 18:01:31 -0500 (EST)
	(Smail-3.2.0.95 1997-May-7 #1 built 1997-May-25)
Date: Fri, 7 Nov 1997 18:01:30 -0500 (EST)
From: Steve Robbins <steve@nyongwa.montreal.qc.ca>
Reply-To: Steve Robbins <steve@nyongwa.montreal.qc.ca>
To: The FVWM Workers List <fvwm-workers@hpc.uh.edu>
Subject: The GNU configuring scheme
In-Reply-To: <Pine.LNX.3.96.971015204953.26003G-100000@hilbert.nyongwa.montreal.qc.ca>
Message-ID: <Pine.LNX.3.96.971107172259.29542R-100000@hilbert.nyongwa.montreal.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

Hi again,

I've already announced the autoconf patches for fvwm here.  Subsequently,
I was completely underwhelmed by the response.  Maybe you were put off by
my disclaimer?

> It's rather rough, but it is enough to build & install fvwm on the systems
> I've tested: linux 2.0, irix 5, sunos 4, and dec OSF/1.  
> 
> HOWEVER: in each case, I had gcc & all the GNU stuff installed.  So it
> really needs to be tested on some non-GNU systems.

Since that time, I have tested it without GNU tools.  It configures fine
under sunos 4, dec OSF/1, and irix 5 *without* GNU tools.  Since the code
is ANSI, it won't build under sun's default compiler.  Most folks with
sunos 4 know this, and should already have gcc installed.  Similarly, irix
5's make is buggy (or doesn't support VPATH at any rate) so you can not
build it in a directory other than the source directory. 

I have updated the kit from time to time; the version on the web now is
decent enough to be integrated into the next beta release.  

The software is at:

	http://www.cs.mcgill.ca/~stever/software/fvwm

Please take a look & pass on any comments you might have.

--
Steve Robbins                              <steve@nyongwa.montreal.qc.ca>

Don't know what I want, but I know how to get it.


--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Sat Nov  8 10:23:03 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Sat, 08 Nov 1997 10:23:03 -0600 (CST)
Received: from mercury.elmailer.net (mercury.elmailer.net [195.224.76.4]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id KAA00058 for <fvwm-workers@hpc.uh.edu>; Sat, 8 Nov 1997 10:22:55 -0600 (CST)
Received: by mercury.elmailer.net with ESMTP
    from sfere.greenend.org.uk (sfere.greenend.org.uk [195.224.38.1])
    id QAA02453 for <fvwm-workers@hpc.uh.edu> (2.3.5-8.8.7/3.1.25);
    Sat, 8 Nov 1997 16:20:53 GMT
Received: from valour.greenend.org.uk (valour.greenend.org.uk [195.224.38.2])
          by sfere.greenend.org.uk with ESMTP
          id OAA10885 for <fvwm-workers@hpc.uh.edu>
          (2.1.1h-8.8.5/2.1b-greenend); Sat, 8 Nov 1997 14:52:57 GMT
Received: by valour.greenend.org.uk
	id m0xUCFt-000qE8C
	(Debian Smail-3.2 1996-Jul-4 #2); Sat, 8 Nov 1997 14:52:57 +0000 (GMT)
Message-Id: <m0xUCFt-000qE8C@valour.greenend.org.uk>
Date: Sat, 8 Nov 1997 14:52:57 +0000 (GMT)
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="Ag3Al2wSc2"
Content-Transfer-Encoding: 7bit
From: Austin Donnelly <austin@greenend.org.uk>
To: fvwm-workers@hpc.uh.edu
Subject: window under mouse doesn't get focus at startup
X-Mailer: VM 6.34 under Emacs 19.34.1
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1


--Ag3Al2wSc2
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

An old chestnut, I'm afraid.

It seems people aren't too happy about fvwm2's behaviour of not giving
focus to the window that's under the cursor during startup.  Any
chance of a fix, or should I look into this myself?

Austin


--Ag3Al2wSc2
Content-Type: message/rfc822
Content-Transfer-Encoding: 7bit

X-Digest: possible problem with fvwm2 (fwd)
Return-path: <jay@debian.org>
Envelope-to: and1000@hermes.cam.ac.uk
Delivery-date: Fri, 7 Nov 1997 16:15:06 +0000
Received: from mauve.csi.cam.ac.uk [131.111.8.38] (exim)
	by violet.csi.cam.ac.uk with smtp (Exim 1.73 #1)
	id 0xTr3q-0006dJ-00; Fri, 7 Nov 1997 16:15:06 +0000
Received: from debian.novare.net [205.229.104.5] 
	by mauve.csi.cam.ac.uk with smtp (Exim 1.73 #1)
	id 0xTr3n-0001fB-00; Fri, 7 Nov 1997 16:15:03 +0000
Received: (qmail 29624 invoked by uid 820); 7 Nov 1997 16:10:47 -0000
Delivered-To: and1000@debian.org
Received: (qmail 29621 invoked from network); 7 Nov 1997 16:10:45 -0000
Received: from ppp08.math.uwaterloo.ca (HELO landru.math.uwaterloo.ca) (root@ppp08.math.uwaterloo.ca@129.97.216.228)
  by 205.229.104.5 with SMTP; 7 Nov 1997 16:10:45 -0000
Received: by landru.math.uwaterloo.ca
	id m0xTr6Q-000DJFC
	(Debian Smail-3.2 1996-Jul-4 #2); Fri, 7 Nov 1997 11:17:46 -0500 (EST)
Message-Id: <m0xTr6Q-000DJFC@landru.math.uwaterloo.ca>
X-Mailer: ELM [version 2.4ME+ PL32 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
X-UIDL: 48d4bbaf5d103e85cb69142150bf4f00
From: James A. Treacy <treacy@debian.org>
To: and1000@debian.org
Subject: possible problem with fvwm2
Date: Fri, 7 Nov 1997 11:17:45 -0500 (EST)

I'm writing directly to you instead of filing a bug as this is
probably something that can be fixed using the startup scripts.
When I start X, I don't get focus in the window the mouse is
currently in when using fvwm2. This is rather annoying as I
like to start typing as soon as I start X and having to move
the mouse first is driving me crazy. Ok, it's not that serious. :)

- Jay


--Ag3Al2wSc2--
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Sun Nov  9 13:53:01 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Sun, 09 Nov 1997 13:53:01 -0600 (CST)
Received: from pcnet1.pcnet.com (pcnet1.pcnet.com [204.213.232.3]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id NAA10394 for <fvwm-workers@hpc.uh.edu>; Sun, 9 Nov 1997 13:52:50 -0600 (CST)
Received: from drbob.woodsway.com (ts9-pt12.pcnet.com [199.249.196.112])
	by pcnet1.pcnet.com (8.8.7/PCNet) with ESMTP id OAA11460;
	Sun, 9 Nov 1997 14:48:35 -0500 (EST)
Received: (from root@localhost)
	by drbob.woodsway.com (8.8.5/8.8.5) id OAA00607;
	Sun, 9 Nov 1997 14:48:02 -0500
Message-ID: <XFMail.971109144757.proteus@pcnet.com>
X-Mailer: XFMail 1.2-alpha [p0] on Linux
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
In-Reply-To: <m0xUCFt-000qE8C@valour.greenend.org.uk>
Date: Sun, 09 Nov 1997 14:47:57 -0500 (EST)
Organization: Woodsway Consulting
From: Bob Woodside <proteus@pcnet.com>
To: Austin Donnelly <austin@greenend.org.uk>
Subject: RE: window under mouse doesn't get focus at startup
Cc: fvwm-workers@hpc.uh.edu
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1


On 08-Nov-97 Austin Donnelly wrote:
>An old chestnut, I'm afraid.
>
>It seems people aren't too happy about fvwm2's behaviour of not giving
>focus to the window that's under the cursor during startup.  Any
>chance of a fix, or should I look into this myself?

        I've been tinkering with the focus code (for other reasons), and 
I'd be willing to look at this as well while I'm in the code...

        The "fix" seems superficially easy - there's an XSetInputFocus to
the dummy NoFocus window at startup, and removing it seems not to cause 
any grief. This gives the result your user seems to want, *if*....

        The "if" is this: if your user uses *all* mouse focus and no
click focus windows, he should be happy. However, each time a ClickToFocus
window gets created, it has the focus given to it (this is the area I've
been looking into), so if your user uses a mix of focus policies, the
window under the mouse could still get the focus taken away by a clicky 
window, depending on the order of events at startup.

        I don't see a universally acceptable way of resolving this 
potential conflict without adding yet another option, which I'd hoped not
to do - I wanted to try sending Chuck a *small* patch for a change.  :-)
I'll have to give this a little more thought.

        If your users can live with the simple version, I'll be happy to
pass the one-liner along.


        - Bob


--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Sun Nov  9 14:26:40 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Sun, 09 Nov 1997 14:26:40 -0600 (CST)
Received: from rhodes.cs.washington.edu (rhodes.cs.washington.edu [128.95.1.134]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id OAA10717 for <fvwm-workers@hpc.uh.edu>; Sun, 9 Nov 1997 14:26:34 -0600 (CST)
Received: (gjb@localhost) by rhodes.cs.washington.edu (8.8.5+CS/7.2ws+) id MAA23949; Sun, 9 Nov 1997 12:23:00 -0800 (PST)
To: Austin Donnelly <austin@greenend.org.uk>
Cc: fvwm-workers@hpc.uh.edu
Subject: Re: window under mouse doesn't get focus at startup
References: <m0xUCFt-000qE8C@valour.greenend.org.uk>
From: Greg Badros <gjb@cs.washington.edu>
Date: 09 Nov 1997 12:23:00 -0800
In-Reply-To: Austin Donnelly's message of "Sat, 8 Nov 1997 14:52:57 +0000 (GMT)"
Message-ID: <qrriuu1vmu3.fsf@rhodes.cs.washington.edu>
Lines: 59
X-Mailer: Gnus v5.4.65/XEmacs 19.15
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

Austin Donnelly <austin@greenend.org.uk> writes:

> --Ag3Al2wSc2
> Content-Type: text/plain; charset=us-ascii
> Content-Transfer-Encoding: 7bit
> 
> An old chestnut, I'm afraid.
> 
> It seems people aren't too happy about fvwm2's behaviour of not giving
> focus to the window that's under the cursor during startup.  Any
> chance of a fix, or should I look into this myself?
> 
> Austin

I've fixed this for SCWM (Scheme Configurable Window Manager) which
started out descending from fvwm2 code; though I don't have a patch
specific to fvwm2, here's what works for me:

In the main() function, just after UnBlackoutScreen(), and before the
HandleEvents() call,  call a new function "CoerceEnterNotifyOnCurrentWindow()".
That function (can throw it in misc.c, if you like) looks like this


/* CoerceEnterNotifyOnCurrentWindow()
 * Pretends to get a HandleEnterNotify on the
 * window that the pointer currently is in so that
 * the focus gets set correctly from the beginning
 * Note that this presently only works if the current
 * window is not click_to_focus;  I think that
 * that behaviour is correct and desirable. --11/08/97 gjb */
void
CoerceEnterNotifyOnCurrentWindow()
{
  extern ScwmWindow *swCurrent; /* from events.c */
  Window child, root;
  int root_x, root_y;
  int win_x, win_y;
  Bool f = XQueryPointer(dpy, Scr.Root, &root,
			 &child, &root_x, &root_y, &win_x, &win_y, &JunkMask);
  if (f && child != None) {
    Event.xany.window = child;
    if (XFindContext(dpy, child, ScwmContext, (caddr_t *) &swCurrent) == XCNOENT)
      swCurrent = NULL;
    HandleEnterNotify();
    swCurrent = None;
  }
}

Note that swCurrent is called Tmp_win in fvwm2, I believe.  Some of the
other variable names have changed (ScwmContext probably was FvwmContext,
I'd guess).

Let me know if this isn't obviously workable in fvwm2...

Greg J. Badros
gjb@cs.washington.edu
Seattle, WA  USA
http://www.cs.washington.edu/homes/gjb

--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Sun Nov  9 21:23:28 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Sun, 09 Nov 1997 21:23:28 -0600 (CST)
Received: from pcnet1.pcnet.com (pcnet1.pcnet.com [204.213.232.3]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id VAA15945 for <fvwm-workers@hpc.uh.edu>; Sun, 9 Nov 1997 21:23:21 -0600 (CST)
Received: from drbob.woodsway.com (ts9-pt0.pcnet.com [199.249.196.100])
	by pcnet1.pcnet.com (8.8.7/PCNet) with ESMTP id WAA17813;
	Sun, 9 Nov 1997 22:15:51 -0500 (EST)
Received: (from root@localhost)
	by drbob.woodsway.com (8.8.5/8.8.5) id WAA01069;
	Sun, 9 Nov 1997 22:15:24 -0500
Message-ID: <XFMail.971109221523.proteus@pcnet.com>
X-Mailer: XFMail 1.2-alpha [p0] on Linux
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
In-Reply-To: <qrriuu1vmu3.fsf@rhodes.cs.washington.edu>
Date: Sun, 09 Nov 1997 22:15:23 -0500 (EST)
Organization: Woodsway Consulting
From: Bob Woodside <proteus@pcnet.com>
To: Greg Badros <gjb@cs.washington.edu>
Subject: Re: window under mouse doesn't get focus at startup
Cc: fvwm-workers@hpc.uh.edu, Austin Donnelly <austin@greenend.org.uk>
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1


On 09-Nov-97 Greg Badros wrote:
gjb>>  In the main() function, just after UnBlackoutScreen(), and before the
gjb>>  HandleEvents() call,  call a new function
gjb>>  "CoerceEnterNotifyOnCurrentWindow()".
gjb>>  That function (can throw it in misc.c, if you like) looks like this


        Thanks, Greg. This does the trick nicely. After my last post, I'd
been toying with putting the XQueryPointer and another XSetInputFocus 
inline in main(), but I like your approach better.

        I put a patch modified for fvwm-2.0.46 in the incoming directory,
under the name MouseFocusOnStartup.patch. so it should show up in 
the version-2/unofficial_patches directory soon.


        - Bob

--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Mon Nov 10 10:09:13 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Mon, 10 Nov 1997 10:09:13 -0600 (CST)
Received: from bulkrate.cc.bellcore.com (bulkrate.cc.bellcore.com [128.96.96.96]) by sina.hpc.uh.edu (8.7.3/8.7.3) with SMTP id KAA23778 for <fvwm-workers@hpc.uh.edu>; Mon, 10 Nov 1997 10:09:05 -0600 (CST)
Received: from castle.mk.bellcore.com ([128.96.133.172]) by bulkrate.cc.bellcore.com with SMTP id AA27654
  (5.67b/IDA-1.5 for <fvwm-workers@hpc.uh.edu>); Mon, 10 Nov 1997 11:12:15 -0500
Received: from mk.bellcore.com by castle.mk.bellcore.com (SMI-8.6/SMI-SVR4/100)
	id LAA10367; Mon, 10 Nov 1997 11:08:18 -0500
Message-Id: <199711101608.LAA10367@castle.mk.bellcore.com>
To: fvwm-workers@hpc.uh.edu
Subject: Re: window under mouse doesn't get focus at startup 
In-Reply-To: Your message of Sun, 09 Nov 1997 14:47:57 -0500.
             <XFMail.971109144757.proteus@pcnet.com> 
X-Face: -:-!LDdizWr~[l?RsG!7/BSm'=,`y>~^N7a#qX+.-ZUy"%YF.bP?t_E$lZG54!X1`_>u8>V
 /DpeH-oUPJ".cJfU'!(om[k{>?!DzZP&UYPi!W/]`[K`Ga+S()<~)mZlm;m}0fId<>1}XS.O+zV%w"
 1)-+K#MqP:&_@FrPF}_}R?_\"z9mHc!)e{e/DNzDY&*QoH,HGZJP#LszzhoGERD7$J4ebNt9oh-nvL
 *IX4w6m=+qtbLQrrI{-jd2Q+(ZUg,a`n58O}z/zl"
Mime-Version: 1.0 (generated by tm-edit 7.106)
Content-Type: text/plain; charset=US-ASCII
Date: Mon, 10 Nov 1997 11:08:20 -0500
From: Dan Espen <dane@mk.bellcore.com>
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

Bob Woodside <proteus@pcnet.com> writes:
> 
> On 08-Nov-97 Austin Donnelly wrote:
> >An old chestnut, I'm afraid.
> >
> >It seems people aren't too happy about fvwm2's behaviour of not giving
> >focus to the window that's under the cursor during startup.  Any
> >chance of a fix, or should I look into this myself?
> 
>         I've been tinkering with the focus code (for other reasons), and 
> I'd be willing to look at this as well while I'm in the code...
> 
>         The "fix" seems superficially easy - there's an XSetInputFocus to
> the dummy NoFocus window at startup, and removing it seems not to cause 
> any grief. This gives the result your user seems to want, *if*....
> 
>         The "if" is this: if your user uses *all* mouse focus and no
> click focus windows, he should be happy. However, each time a ClickToFocus
> window gets created, it has the focus given to it (this is the area I've
> been looking into), so if your user uses a mix of focus policies, the
> window under the mouse could still get the focus taken away by a clicky 
> window, depending on the order of events at startup.
> 
>         I don't see a universally acceptable way of resolving this 
> potential conflict without adding yet another option, which I'd hoped not
> to do - I wanted to try sending Chuck a *small* patch for a change.  :-)
> I'll have to give this a little more thought.
> 
>         If your users can live with the simple version, I'll be happy to
> pass the one-liner along.

Glad to  hear you are looking  at the focus code.   I find the loss of
focus during startup to be mildy annoying and I am glad you have found
a fix for the problem.

Even more annoying is the way nothing gets focus after certain windows
are closed.  For example, when the Netscape  window is closed, and the
pointer lands on  the  root window, mouse  movement  in and out   of a
window is required to get root window keybindings to start working.

(I use Style "*" MouseFocus)

I suspected that the "no focus  window" had something  to do with this
also, but  had difficultly following the  related code.  Hopefully you
could look at this problem also?

> 
>         - Bob

--
Dan Espen                                Phone: (732) 699-5570
444 Hoes Lane  Room RRC 1C-214           E-mail: dane@mk.bellcore.com
Piscataway, NJ 08854
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Mon Nov 10 10:19:42 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Mon, 10 Nov 1997 10:19:42 -0600 (CST)
Received: from bulkrate.cc.bellcore.com (bulkrate.cc.bellcore.com [128.96.96.96]) by sina.hpc.uh.edu (8.7.3/8.7.3) with SMTP id KAA23966 for <fvwm-workers@hpc.uh.edu>; Mon, 10 Nov 1997 10:19:35 -0600 (CST)
Received: from castle.mk.bellcore.com ([128.96.133.172]) by bulkrate.cc.bellcore.com with SMTP id AA28318
  (5.67b/IDA-1.5 for <fvwm-workers@hpc.uh.edu>); Mon, 10 Nov 1997 11:22:49 -0500
Received: from mk.bellcore.com by castle.mk.bellcore.com (SMI-8.6/SMI-SVR4/100)
	id LAA10517; Mon, 10 Nov 1997 11:18:56 -0500
Message-Id: <199711101618.LAA10517@castle.mk.bellcore.com>
To: The FVWM Workers List <fvwm-workers@hpc.uh.edu>
Subject: Re: The GNU configuring scheme 
In-Reply-To: Your message of Fri, 07 Nov 1997 18:01:30 -0500.
             <Pine.LNX.3.96.971107172259.29542R-100000@hilbert.nyongwa.montreal.qc.ca> 
X-Face: -:-!LDdizWr~[l?RsG!7/BSm'=,`y>~^N7a#qX+.-ZUy"%YF.bP?t_E$lZG54!X1`_>u8>V
 /DpeH-oUPJ".cJfU'!(om[k{>?!DzZP&UYPi!W/]`[K`Ga+S()<~)mZlm;m}0fId<>1}XS.O+zV%w"
 1)-+K#MqP:&_@FrPF}_}R?_\"z9mHc!)e{e/DNzDY&*QoH,HGZJP#LszzhoGERD7$J4ebNt9oh-nvL
 *IX4w6m=+qtbLQrrI{-jd2Q+(ZUg,a`n58O}z/zl"
Mime-Version: 1.0 (generated by tm-edit 7.106)
Content-Type: text/plain; charset=US-ASCII
Date: Mon, 10 Nov 1997 11:18:57 -0500
From: Dan Espen <dane@mk.bellcore.com>
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

Steve Robbins <steve@nyongwa.montreal.qc.ca> writes:
> Hi again,
> 
> I've already announced the autoconf patches for fvwm here.  Subsequently,
> I was completely underwhelmed by the response.  Maybe you were put off by
> my disclaimer?

I wasn't put off by the disclaimer.

I  have to guess,  but my  guess  is most people  on  this list have a
working fvwm2 build environment.  Ie. xmkmf  is working for them.  The
change to "config" would benefit new users more than existing users.

> > It's rather rough, but it is enough to build & install fvwm on the systems
> > I've tested: linux 2.0, irix 5, sunos 4, and dec OSF/1.  
> > 
> > HOWEVER: in each case, I had gcc & all the GNU stuff installed.  So it
> > really needs to be tested on some non-GNU systems.
> 
> Since that time, I have tested it without GNU tools.  It configures fine
> under sunos 4, dec OSF/1, and irix 5 *without* GNU tools.  Since the code
> is ANSI, it won't build under sun's default compiler.  Most folks with
> sunos 4 know this, and should already have gcc installed.  Similarly, irix
> 5's make is buggy (or doesn't support VPATH at any rate) so you can not
> build it in a directory other than the source directory. 
> 
> I have updated the kit from time to time; the version on the web now is
> decent enough to be integrated into the next beta release.  
> 
> The software is at:
> 
> 	http://www.cs.mcgill.ca/~stever/software/fvwm
> 
> Please take a look & pass on any comments you might have.
> 
> --
> Steve Robbins                              <steve@nyongwa.montreal.qc.ca>
--
Dan Espen                                Phone: (732) 699-5570
444 Hoes Lane  Room RRC 1C-214           E-mail: dane@mk.bellcore.com
Piscataway, NJ 08854
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Mon Nov 10 21:41:28 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Mon, 10 Nov 1997 21:41:28 -0600 (CST)
Received: from pcnet1.pcnet.com (pcnet1.pcnet.com [204.213.232.3]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id VAA04495 for <fvwm-workers@hpc.uh.edu>; Mon, 10 Nov 1997 21:41:21 -0600 (CST)
Received: from drbob.woodsway.com (ts9-pt21.pcnet.com [199.249.196.121])
	by pcnet1.pcnet.com (8.8.7/PCNet) with ESMTP id WAA29387;
	Mon, 10 Nov 1997 22:37:10 -0500 (EST)
Received: (from root@localhost)
	by drbob.woodsway.com (8.8.5/8.8.5) id WAA00413;
	Mon, 10 Nov 1997 22:36:36 -0500
Message-ID: <XFMail.971110223636.proteus@pcnet.com>
X-Mailer: XFMail 1.2-alpha [p0] on Linux
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
In-Reply-To: <199711101608.LAA10367@castle.mk.bellcore.com>
Date: Mon, 10 Nov 1997 22:36:36 -0500 (EST)
Organization: Woodsway Consulting
From: Bob Woodside <proteus@pcnet.com>
To: Dan Espen <dane@mk.bellcore.com>
Subject: Re: window under mouse doesn't get focus at startup
Cc: fvwm-workers@hpc.uh.edu
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1


On 10-Nov-97 Dan Espen wrote:
>
> Glad to  hear you are looking  at the focus code.   I find the loss of
> focus during startup to be mildy annoying and I am glad you have found
> a fix for the problem.
>
> Even more annoying is the way nothing gets focus after certain windows
> are closed.  For example, when the Netscape  window is closed, and the
> pointer lands on  the  root window, mouse  movement  in and out   of a
> window is required to get root window keybindings to start working.
>
> I suspected that the "no focus  window" had something  to do with this
> also, but  had difficultly following the  related code.  Hopefully you
> could look at this problem also?
>

        Aww...just when I thought I had a nice small patch all wrapped 
up!  :-)

        Actually, I think I'd better wrap up the PleaseDontStealMyFocus
patch and send it to Chuck, and work on this as a separate item. Your 
problem looks like it may take a little more research.

        You're quite right that the NoFocus window is getting into the
act. When a window unmaps, if fvwm can't find a likely focus candidate 
next in the window chain, it gives focus to the NoFocus window. Hmmm...
wonder what would happen if we tried giving it to the root window instead?
Anybody been there already...?

        I'll definitely look into it.


        - Bob
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Wed Nov 12 16:24:53 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Wed, 12 Nov 1997 16:24:53 -0600 (CST)
Received: from mercury.elmailer.net (mercury.elmailer.net [195.224.76.4]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id QAA07242 for <fvwm-workers@hpc.uh.edu>; Wed, 12 Nov 1997 16:24:44 -0600 (CST)
Received: by mercury.elmailer.net with ESMTP
    from sfere.greenend.org.uk (sfere.greenend.org.uk [195.224.38.1])
    id WAA11067 for <fvwm-workers@hpc.uh.edu> (2.3.5-8.8.7/3.1.25);
    Wed, 12 Nov 1997 22:22:39 GMT
Received: from valour.greenend.org.uk (valour.greenend.org.uk [195.224.38.2])
          by sfere.greenend.org.uk with ESMTP
          id WAA28515 for <fvwm-workers@hpc.uh.edu>
          (2.1.1h-8.8.5/2.1b-greenend); Wed, 12 Nov 1997 22:22:35 GMT
Received: by valour.greenend.org.uk
	id m0xVlBD-000qECC
	(Debian Smail-3.2 1996-Jul-4 #2); Wed, 12 Nov 1997 22:22:35 +0000 (GMT)
Message-Id: <m0xVlBD-000qECC@valour.greenend.org.uk>
Date: Wed, 12 Nov 1997 22:22:35 +0000 (GMT)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
From: Austin Donnelly <austin@greenend.org.uk>
To: fvwm-workers@hpc.uh.edu
Subject: MenuStyle mwm woes
X-Mailer: VM 6.34 under Emacs 19.34.1
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

In a Debian BUg report, Karl M. Hegbloom <karlheg@inetarena.com>
wrote:
> The MWM style menus have poor behaviour at the right edge of the
> screen.  If you try XEmacs, GIMP, or Windows 95, and opened a menu
> near the right edge of the screen, you will see that they flip to the
> opposite side, rather than opening right under the pointer on you.
> 
> The fvwm style menus don't pop up until you fly over the arrow, which
> makes them much better at the edge.

Isn't someone looking at the menu code, with a view to cleaning it up?
Could they take this into account when they're in there  - ta!

Austin
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Wed Nov 12 17:44:49 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Wed, 12 Nov 1997 17:44:49 -0600 (CST)
Received: from rhodes.cs.washington.edu (rhodes.cs.washington.edu [128.95.1.134]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id RAA08665 for <fvwm-workers@hpc.uh.edu>; Wed, 12 Nov 1997 17:44:43 -0600 (CST)
Received: (gjb@localhost) by rhodes.cs.washington.edu (8.8.5+CS/7.2ws+) id PAA06627; Wed, 12 Nov 1997 15:41:06 -0800 (PST)
To: Austin Donnelly <austin@greenend.org.uk>
Cc: fvwm-workers@hpc.uh.edu
Subject: Re: MenuStyle mwm woes
References: <m0xVlBD-000qECC@valour.greenend.org.uk>
From: Greg Badros <gjb@cs.washington.edu>
Date: 12 Nov 1997 15:41:05 -0800
In-Reply-To: Austin Donnelly's message of "Wed, 12 Nov 1997 22:22:35 +0000 (GMT)"
Message-ID: <qrroh3pznn2.fsf@rhodes.cs.washington.edu>
Lines: 33
X-Mailer: Gnus v5.4.65/XEmacs 19.15
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

Austin Donnelly <austin@greenend.org.uk> writes:

> In a Debian BUg report, Karl M. Hegbloom <karlheg@inetarena.com>
> wrote:
> > The MWM style menus have poor behaviour at the right edge of the
> > screen.  If you try XEmacs, GIMP, or Windows 95, and opened a menu
> > near the right edge of the screen, you will see that they flip to the
> > opposite side, rather than opening right under the pointer on you.
> > 
> > The fvwm style menus don't pop up until you fly over the arrow, which
> > makes them much better at the edge.
> 
> Isn't someone looking at the menu code, with a view to cleaning it up?
> Could they take this into account when they're in there  - ta!

I did a major rewrite of the windowing code on 2.0.45;  the patch is
available on my web patch under "patches".  Last I heard Chuck was
planning on integrating my changes into the standard release, but I
don't know what his plans are or when he expects to have the time that
it'll take.  The menuing code rewrite eliminated a lot of bugs, and
added animated menus and win95-like drawing code configurably.  It's
biggest improvement is in keyboard handling-- cursor down goes to the
next item, cursor right pops up a submenu, etc., instead of just
simulating mouse moves lock the stock menu code.

Also, try #define-ing LEFT_MENUS in the stock code;  it'll give you
"popup to the left when at the right edge of the screen" behaviour (but
everything else is still broken badly, IMHO).

Greg J. Badros
gjb@cs.washington.edu
Seattle, WA  USA
http://www.cs.washington.edu/homes/gjb
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Thu Nov 13 08:35:08 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Thu, 13 Nov 1997 08:35:08 -0600 (CST)
Received: from VNET.IBM.COM (vnet.ibm.com [204.146.168.194]) by sina.hpc.uh.edu (8.7.3/8.7.3) with SMTP id IAA18888 for <fvwm-workers@hpc.uh.edu>; Thu, 13 Nov 1997 08:35:01 -0600 (CST)
Received: from FISHKILL by VNET.IBM.COM (IBM VM SMTP V2R4) with BSMTP id 4492;
   Thu, 13 Nov 97 09:34:52 EST
Received: by FISHKILL (XAGENTA 4.0) id 1169; Thu, 13 Nov 1997 09:34:45 -0500 
Received: by cold.fishkill.ibm.com (AIX 4.1/UCB 5.64/4.03)
          id AA35874; Thu, 13 Nov 1997 09:34:40 -0500
Date: Thu, 13 Nov 1997 09:34:40 -0500
Message-Id: <9711131434.AA35874@cold.fishkill.ibm.com>
From: "Charles Hines" <chuck_hines@VNET.IBM.COM>
To: Greg Badros <gjb@cs.washington.edu>
Cc: Austin Donnelly <austin@greenend.org.uk>, fvwm-workers@hpc.uh.edu
Subject: Re: MenuStyle mwm woes
In-Reply-To: <qrroh3pznn2.fsf@rhodes.cs.washington.edu>
References: <m0xVlBD-000qECC@valour.greenend.org.uk>
        <qrroh3pznn2.fsf@rhodes.cs.washington.edu>
X-Mailer: VM 6.34 under 19.16 "Lille" XEmacs Lucid
X-Face: 'pn"gAx+&w4-=-}\z>*.Y*@(lC;t1<P);@iwiv';)vn3H2\/.x#;>J[a,/Q.Yv0^Wwc6_"H]}}-"?%)ETS`1v[]P`w4,E.9Bgf*XI4<H{C}Mf@'Ms)z?Bqzf"8v/oY\9K){w}\pw
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

>>>>> "Greg" == Greg Badros <gjb@cs.washington.edu> writes:

....
Greg> I did a major rewrite of the windowing code on 2.0.45;  the patch is
Greg> available on my web patch under "patches".  Last I heard Chuck was
Greg> planning on integrating my changes into the standard release, but I
Greg> don't know what his plans are

Still planned for 2.0.47.

Greg> or when he expects to have the time that it'll take.

Hmm...  Now that's the truly tough part, especially considering my
"recent" track record.  But fear not, I'll make the time...

Chuck
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Thu Nov 13 09:43:11 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Thu, 13 Nov 1997 09:43:11 -0600 (CST)
Received: from Athena.McRCIM.McGill.EDU (root@Athena.McRCIM.McGill.EDU [132.206.4.20]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id JAA20316 for <fvwm-workers@hpc.uh.edu>; Thu, 13 Nov 1997 09:43:04 -0600 (CST)
Received: from Chart.McRCIM.McGill.EDU (uucp@Chart.McRCIM.McGill.EDU [132.206.4.7]) by 9525 on Athena.McRCIM.McGill.EDU (8.8.5) with ESMTP id KAA09525 for <hpc.uh.edu!fvwm-workers>; Thu, 13 Nov 1997 10:42:55 -0500 (EST)
Received: from hilbert.UUCP (uucp@localhost) by 18985 on Chart.McRCIM.McGill.EDU (8.8.5) with UUCP id KAA18985 for hpc.uh.edu!fvwm-workers; Thu, 13 Nov 1997 10:42:54 -0500 (EST)
Received: from localhost by hilbert.nyongwa.montreal.qc.ca
	via sendmail with smtp
	id <m0xW15c-0000vhC@hilbert.nyongwa.montreal.qc.ca>
	for <fvwm-workers@hpc.uh.edu>; Thu, 13 Nov 1997 10:21:52 -0500 (EST)
	(Smail-3.2.0.95 1997-May-7 #1 built 1997-May-25)
Date: Thu, 13 Nov 1997 10:21:52 -0500 (EST)
From: Steve Robbins <steve@nyongwa.montreal.qc.ca>
To: The FVWM Workers List <fvwm-workers@hpc.uh.edu>
Subject: Re: The GNU configuring scheme 
In-Reply-To: <199711101618.LAA10517@castle.mk.bellcore.com>
Message-ID: <Pine.LNX.3.96.971113095442.23121B-100000@hilbert.nyongwa.montreal.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

On Mon, 10 Nov 1997, Dan Espen wrote:

> I  have to guess,  but my  guess  is most people  on  this list have a
> working fvwm2 build environment.  Ie. xmkmf  is working for them.  The
> change to "config" would benefit new users more than existing users.

Yes, I think this is exceedingly likely.  :)  I wasn't offering the
patches as a service to the people on this list; I was hoping, rather,
that people here would check the patches under various configurations so
that any problems could be quickly corrected.  Then, with luck, autoconfig
would make it into the next fvwm release, helping out those who are *not*
on this list.  Maybe even helping those who are mailing the fvwm list
about build problems ;-) 

In a more serious vein, I thought a discussion on build issues would be
helpful.  For example, some of the choices I made are slightly different
from the old behaviour.

* libXpm and librplay are probed for, and used by default if found; you
have to explicitly disable them if present on the system, but not wanted;
the old behaviour was that you had to explicitly enable or disable them

* I kept the tradition of installing all the modules and config file into
.../lib/fvwm[2]; this is a bit at odds with modern standards: modules
belong in libexec, and the config file in /etc or something; are there
strong feelings about this?

* utils are not installed by default; is there any reason not to install
them?

* there used to be an option to install the stuff in the sample.fvwmrc
directory; since _not_ installing is the common case, I removed this; 
hence one has to install them by hand the first time

* is there a reason for separating modules into "modules" and "extras"?  I
didn't touch the extras, so they have to be built the old way, which may
be harder if Fvwm.tmpl is gone; is it worth the bother of autconfiguring
them?  (It's on my list of things to do)

* there are way too many compile-time options: are they really needed, or
can they be made run-time options?

--
Steve Robbins                              <steve@nyongwa.montreal.qc.ca>

Too cool to live -- too smart to die.

--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Sun Nov 16 09:40:32 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Sun, 16 Nov 1997 09:40:32 -0600 (CST)
Received: from romeo.ic.ac.uk (romeo.ic.ac.uk [155.198.5.9]) by sina.hpc.uh.edu (8.7.3/8.7.3) with SMTP id JAA08539 for <fvwm-workers@hpc.uh.edu>; Sun, 16 Nov 1997 09:40:20 -0600 (CST)
Received: from judy.ic.ac.uk [155.198.5.5] 
	by romeo.ic.ac.uk with esmtp (Exim 1.62 #1)
	id 0xX6ny-00073b-00; Sun, 16 Nov 1997 15:40:10 +0000
Received: from chcmga.ch.ic.ac.uk (chcmga.ch.ic.ac.uk [155.198.232.23]) by judy.ic.ac.uk (8.7.5/8.7.5) with SMTP id PAA25854 for <fvwm-workers@hpc.uh.edu>; Sun, 16 Nov 1997 15:39:56 GMT
Received: from chcgm.ch.ic.ac.uk by chcmga.ch.ic.ac.uk (940816.SGI.8.6.9/4.0)
          id PAA22405; Sun, 16 Nov 1997 15:39:55 GMT
X-Received: from localhost by chcgm.ch.ic.ac.uk; Sun, 16 Nov 1997 15:39:54 GMT
Date: Sun, 16 Nov 1997 15:39:53 +0000 (gmt)
From: Spot <s.c.potter@ic.ac.uk>
X-Sender: scp@chcgm
Reply-To: Spot <s.c.potter@ic.ac.uk>
To: fvwm-workers@hpc.uh.edu
Subject: IRIX 6.4
Message-ID: <Pine.SGI.3.93.971115161827.10681G-100000@chcgm>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

I'm getting bus errors from trying to run version 2.0.46
under IRIX 6.4 (compiled with SG's cc compiler version 7.1).
The problem seems to be a rather large value of PPosOverride
in HandleMapRequestKeepRaised() (line 666 in events.c).

I wonder if anyone else has had similar problems/ideas what
I should do to solve it. FVWM-1 works fine.


Thanks,
Simon

--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Thu Nov 20 09:06:20 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Thu, 20 Nov 1997 09:06:20 -0600 (CST)
Received: from enterprise.arl.psu.edu (enterprise.arl.psu.edu [128.118.40.159]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id JAA16956 for <fvwm-workers@hpc.uh.edu>; Thu, 20 Nov 1997 09:06:12 -0600 (CST)
Received: from picard.arl.psu.edu (els@picard.arl.psu.edu [128.118.40.22]) by enterprise.arl.psu.edu (8.8.5/8.7.3) with ESMTP id KAA02263 for <fvwm-workers@hpc.uh.edu>; Thu, 20 Nov 1997 10:06:00 -0500 (EST)
Received: (from els@localhost) by picard.arl.psu.edu (8.8.5/8.7.3) id KAA01882; Thu, 20 Nov 1997 10:05:58 -0500 (EST)
Date: Thu, 20 Nov 1997 10:05:58 -0500 (EST)
Message-Id: <199711201505.KAA01882@picard.arl.psu.edu>
From: "Eric L. Schott"  <eschott@psu.edu>
To: fvwm-workers@hpc.uh.edu
Subject: Memory Leaks
Mime-Version: 1.0 (generated by tm-edit 7.94)
Content-Type: text/plain; charset=US-ASCII
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

I was looking at the code for fvwm/windows.c.  I see a loop which
calls "GetToken."  From the comments with GetToken:

  ** GetToken: destructively rips next token from string, returning it
  **           (you should free returned string later)

I do not see a "free(tok)" in windows.c.  Should this be added? 

Also in windows.c, I see a call to strdup.  I have never used this
service, but it seems from the man page that free needs to be called
here too.  Diffs are below.

(I am not on this group; please respond by email.)

Eric

+--------------------------------------------------------------------------+
|   Eric L. Schott  <eschott@psu.edu>     "And when you get lost in        |
|   The Pennsylvania State University      life, know that the road of     |
|   Office: (814) 863-4194                 return to God is always open."  |
|   Fax     (814) 863-7841                             Albert Schweitzer,  |
|   http://www.personal.psu.edu/els6                 Letter to god-child.  |
+--------------------------------------------------------------------------+

*** windows.c.dist	Tue Nov 11 08:50:56 1997
--- windows.c	Thu Nov 20 09:31:10 1997
***************
*** 143,149 ****
--- 143,152 ----
        {
          fvwm_msg(ERR,"WindowList","Unknown option '%s'",tok);
        }
+ 
+       free (tok);
      }
+     free(line);
    }
  
    globalFlags = flags;


--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Thu Nov 20 13:29:27 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Thu, 20 Nov 1997 13:29:27 -0600 (CST)
Received: from VNET.IBM.COM (vnet.ibm.com [204.146.168.194]) by sina.hpc.uh.edu (8.7.3/8.7.3) with SMTP id NAA20899 for <fvwm-workers@hpc.uh.edu>; Thu, 20 Nov 1997 13:29:19 -0600 (CST)
Received: from FISHKILL by VNET.IBM.COM (IBM VM SMTP V2R4) with BSMTP id 0045;
   Thu, 20 Nov 97 14:29:06 EST
Received: by FISHKILL (XAGENTA 4.0) id 2626; Thu, 20 Nov 1997 14:28:44 -0500 
Received: by cold.fishkill.ibm.com (AIX 4.1/UCB 5.64/4.03)
          id AA26792; Thu, 20 Nov 1997 14:28:40 -0500
Date: Thu, 20 Nov 1997 14:28:40 -0500
Message-Id: <9711201928.AA26792@cold.fishkill.ibm.com>
From: "Charles Hines" <chuck_hines@VNET.IBM.COM>
To: "Eric L. Schott"  <eschott@psu.edu>
Cc: fvwm-workers@hpc.uh.edu
Subject: Re: Memory Leaks
In-Reply-To: <199711201505.KAA01882@picard.arl.psu.edu>
References: <199711201505.KAA01882@picard.arl.psu.edu>
X-Mailer: VM 6.34 under 19.16 "Lille" XEmacs Lucid
X-Face: 'pn"gAx+&w4-=-}\z>*.Y*@(lC;t1<P);@iwiv';)vn3H2\/.x#;>J[a,/Q.Yv0^Wwc6_"H]}}-"?%)ETS`1v[]P`w4,E.9Bgf*XI4<H{C}Mf@'Ms)z?Bqzf"8v/oY\9K){w}\pw
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

>>>>> "Eric" == Eric L Schott <eschott@psu.edu> writes:

Eric> I was looking at the code for fvwm/windows.c.  I see a loop which
Eric> calls "GetToken."  From the comments with GetToken:

Eric>   ** GetToken: destructively rips next token from string, returning it
Eric>   **           (you should free returned string later)

Eric> I do not see a "free(tok)" in windows.c.  Should this be added?

Yup.  Thanks for catching that.  Prompted me to take a quick look & I
found a couple of other places where this was happening too...

Eric> Also in windows.c, I see a call to strdup.  I have never used this
Eric> service, but it seems from the man page that free needs to be called
Eric> here too.

That's true, but probably not needed in this case.  GetToken eats away
at that strdup'ed string until there is nothing left (freeing as it
goes) so it should be completely freed by the time it exist the while
loop.  I can put a check in anyways though, just to be safe.

Chuck
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Mon Nov 24 13:18:07 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Mon, 24 Nov 1997 13:18:07 -0600 (CST)
Received: from castle.mk.bellcore.com (castle.mk.bellcore.com [128.96.133.172]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id NAA13024 for <fvwm-workers@hpc.uh.edu>; Mon, 24 Nov 1997 13:17:58 -0600 (CST)
Received: from mk.bellcore.com (fork [128.96.133.4])
	by castle.mk.bellcore.com (8.8.8/8.8.8) with ESMTP id OAA10702;
	Mon, 24 Nov 1997 14:13:28 -0500 (EST)
Message-Id: <199711241913.OAA10702@castle.mk.bellcore.com>
To: Steve Robbins <steve@nyongwa.montreal.qc.ca>
cc: The FVWM Workers List <fvwm-workers@hpc.uh.edu>
Subject: Re: The GNU configuring scheme 
In-reply-to: Your message of Thu, 13 Nov 1997 10:21:52 -0500.
             <Pine.LNX.3.96.971113095442.23121B-100000@hilbert.nyongwa.montreal.qc.ca> 
x-face: -:-!LDdizWr~[l?RsG!7/BSm'=,`y>~^N7a#qX+.-ZUy"%YF.bP?t_E$lZG54!X1`_>u8>V
 /DpeH-oUPJ".cJfU'!(om[k{>?!DzZP&UYPi!W/]`[K`Ga+S()<~)mZlm;m}0fId<>1}XS.O+zV%w"
 1)-+K#MqP:&_@FrPF}_}R?_\"z9mHc!)e{e/DNzDY&*QoH,HGZJP#LszzhoGERD7$J4ebNt9oh-nvL
 *IX4w6m=+qtbLQrrI{-jd2Q+(ZUg,a`n58O}z/zl"
Mime-Version: 1.0 (generated by tm-edit 7.106)
Content-Type: text/plain; charset=US-ASCII
Date: Mon, 24 Nov 1997 14:13:29 -0500
From: Dan Espen <dane@mk.bellcore.com>
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.1

Steve Robbins <steve@nyongwa.montreal.qc.ca> writes:
> On Mon, 10 Nov 1997, Dan Espen wrote:
> 
> > I  have to guess,  but my  guess  is most people  on  this list have a
> > working fvwm2 build environment.  Ie. xmkmf  is working for them.  The
> > change to "config" would benefit new users more than existing users.
> 
> Yes, I think this is exceedingly likely.  :)  I wasn't offering the
> patches as a service to the people on this list; I was hoping, rather,
> that people here would check the patches under various configurations so
> that any problems could be quickly corrected.  Then, with luck, autoconfig
> would make it into the next fvwm release, helping out those who are *not*
> on this list.  Maybe even helping those who are mailing the fvwm list
> about build problems ;-) 

OK, you convinced me to give it a try.  I'm using Solaris 2.5 with the
Xpm library and  include file installed   in a non-standard  place and
Suns compiler.

> In a more serious vein, I thought a discussion on build issues would be
> helpful.  For example, some of the choices I made are slightly different
> from the old behaviour.
> 
> * libXpm and librplay are probed for, and used by default if found; you
> have to explicitly disable them if present on the system, but not wanted;
> the old behaviour was that you had to explicitly enable or disable them

My non-standard  xpm   library location always   causes problems  with
"configure".  One way I've found to get around it is to do this:

--x-includes="/usr/openwin/include -I/usr/WI/include"

The first directory  is without the  "-I" and the second one  includes
the "-I".  Essentially this fools "configure".

This worked.

I then  looked into the "configure"  executables and found  that there
was a "--with-xpm-includes=", so I tried that and during make I got:

/opt/SUNWspro3.0/bin/cc -DHAVE_CONFIG_H -I. -I. -I.. \
  -I/usr/openwin/include  -g -c Picture.c
"Picture.c", line 33: cannot find include file: <X11/xpm.h>

I added the  backslash.  I think  the "--with-xpm-includes=" should be
documented and work.

What I would really like  is for "configure" to look  at all the "lib"
directories in my $LD_LIBRARY_PATH, replacing "lib" with "include" and
find my xpm include directory without me doing anything.

> * I kept the tradition of installing all the modules and config file into
> .../lib/fvwm[2]; this is a bit at odds with modern standards: modules
> belong in libexec, and the config file in /etc or something; are there
> strong feelings about this?

Yes.   I don't think  thats the tradition.   At  any rate, I've always
installed my modules in the same place I installed the binary.  I also
install the  man pages in a  completely different area  than where the
binaries go.   The documented "--prefix" didn't work  for  me.  I then
checked the executables again and found I could use:

--exec-prefix=/myplace/sun_os5
--mandir=/myotherplace/man
--libdir=/myplace/sun_os5

However that didn't work as I wanted it to because it went and created

/myplace/sun_os5/bin  (for the binaries)
and
/myplace/sun_os5/fvwm2 (for the modules)

> * utils are not installed by default; is there any reason not to install
> them?

Yes.  I don't use or want to install them.

> * there used to be an option to install the stuff in the sample.fvwmrc
> directory; since _not_ installing is the common case, I removed this; 
> hence one has to install them by hand the first time

The  documentation refers the  user to this file.  I  just took a look
and it doesn't seem to say where  it is.  I  would be nice if the make
procedure updated the man pages with the full path name.  I think this
file should be installed, perhaps in the bin?

> * is there a reason for separating modules into "modules" and "extras"?  I
> didn't touch the extras, so they have to be built the old way, which may
> be harder if Fvwm.tmpl is gone; is it worth the bother of autconfiguring
> them?  (It's on my list of things to do)

I  think   there are 2 reasons   for  a module  to  be  in  the extras
directory,  either its not   fully  debugged, or  the  install process
hasn't been fully worked out.

> * there are way too many compile-time options: are they really needed, or
> can they be made run-time options?

I think you  are refering to  the options like "GRADIENT_BUTTONS".  In
my opinion they  are compile time options  because fvwm2  is trying to
stay   true to its  original design  goal  of being  a small efficient
window manager.

I personally compile in all the options, but I think it would be nice to
document the way to turn them off.


The compile option was "-g" by default.  I think it should be "-O"?

> 
> --
> Steve Robbins                              <steve@nyongwa.montreal.qc.ca>
> 
--
Dan Espen                                Phone: (732) 699-5570
444 Hoes Lane  Room RRC 1C-214           E-mail: dane@mk.bellcore.com
Piscataway, NJ 08854
--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

From owner-fvwm-workers@hpc.uh.edu  Wed Nov 26 22:05:22 1997
Received: by sina.hpc.uh.edu (TLB v0.09a (1.20 tibbs 1996/10/09 22:03:07)); Wed, 26 Nov 1997 22:05:22 -0600 (CST)
Received: from Athena.McRCIM.McGill.EDU (root@Athena.McRCIM.McGill.EDU [132.206.4.20]) by sina.hpc.uh.edu (8.7.3/8.7.3) with ESMTP id WAA24508 for <fvwm-workers@hpc.uh.edu>; Wed, 26 Nov 1997 22:05:15 -0600 (CST)
Received: from Chart.McRCIM.McGill.EDU (uucp@Chart.McRCIM.McGill.EDU [132.206.4.7]) by 24249 on Athena.McRCIM.McGill.EDU (8.8.5) with ESMTP id XAA24249; Wed, 26 Nov 1997 23:05:03 -0500 (EST)
Received: from hilbert.UUCP (uucp@localhost) by 25512 on Chart.McRCIM.McGill.EDU (8.8.5) with UUCP id XAA25512; Wed, 26 Nov 1997 23:05:02 -0500 (EST)
Received: from localhost by hilbert.nyongwa.montreal.qc.ca
	via sendmail with smtp
	id <m0xarpQ-0000uXC@hilbert.nyongwa.montreal.qc.ca>
	for <dane@mk.bellcore.com>; Wed, 26 Nov 1997 19:29:12 -0500 (EST)
	(Smail-3.2.0.95 1997-May-7 #1 built 1997-May-25)
Date: Wed, 26 Nov 1997 19:29:12 -0500 (EST)
From: Steve Robbins <steve@nyongwa.montreal.qc.ca>
To: Dan Espen <dane@mk.bellcore.com>
cc: The FVWM Workers List <fvwm-workers@hpc.uh.edu>
Subject: Re: The GNU configuring scheme 
In-Reply-To: <199711241913.OAA10702@castle.mk.bellcore.com>
Message-ID: <Pine.LNX.3.96.971126183717.16473B-100000@hilbert.nyongwa.montreal.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-fvwm-workers@hpc.uh.edu
Precedence: list
X-Majordomo: 1.94.jlt7

On Mon, 24 Nov 1997, Dan Espen wrote:

Hi Dan,\

Thanks for all the comments.  I've tried to answer your questions as best
I could...

> Steve Robbins <steve@nyongwa.montreal.qc.ca> writes:
>
> OK, you convinced me to give it a try.  I'm using Solaris 2.5 with the
> Xpm library and  include file installed   in a non-standard  place and
> Suns compiler.
> 
> > * libXpm and librplay are probed for, and used by default if found; you
> > have to explicitly disable them if present on the system, but not wanted;
> > the old behaviour was that you had to explicitly enable or disable them
> 
> My non-standard  xpm   library location always   causes problems  with
> "configure".  One way I've found to get around it is to do this:
> 
> --x-includes="/usr/openwin/include -I/usr/WI/include"

I'm guessing this means: normal X includes in /usr/openwin, and those for
xpm are in /usr/WI/include ...

> I then  looked into the "configure"  executables and found  that there
> was a "--with-xpm-includes=", so I tried that and during make I got:

Yes; you should be able to use --with-xpm-includes=/usr/WI/include, and
you do NOT have to give --x-includes directly; automake will find them.
 
> /opt/SUNWspro3.0/bin/cc -DHAVE_CONFIG_H -I. -I. -I.. \
>   -I/usr/openwin/include  -g -c Picture.c
> "Picture.c", line 33: cannot find include file: <X11/xpm.h>
> 
> I added the  backslash.  I think  the "--with-xpm-includes=" should be
> documented and work.

Documented, it should be.  However, I think it *does* work.

Furthermore, configure goes to a lot of trouble to detect <X11/xpm.h> at
*configure* time, and will not attempt to use XPM unless it can find BOTH
the header and the actual link library.  I don't understand how you got
this behaviour.  Did you do "make distclean"  or equivalent between
configure runs?  Try my --with-xpm-includes suggestion above on a clean
source tree, and see what happens. 
 
> What I would really like  is for "configure" to look  at all the "lib"
> directories in my $LD_LIBRARY_PATH, replacing "lib" with "include" and
> find my xpm include directory without me doing anything.

Well, I tried arguing a similar idea to the folks on the automake/autoconf
mailing list, and got shot down.  In fact, their reasons were sound, so I
think you have to live with the way things are.  

> > * I kept the tradition of installing all the modules and config file into
> > .../lib/fvwm[2]; this is a bit at odds with modern standards: modules
> > belong in libexec, and the config file in /etc or something; are there
> > strong feelings about this?
> 
> Yes.   

Yes to which?  Change to "modules in libexec, config in /etc"?

> I don't think  thats the tradition.   

How so?  That's how the distributed Imakefiles do things.  What defines
"tradition" if not the traditional Imakefiles?

> The documented "--prefix" didn't work  for  me.  I then
> checked the executables again and found I could use:

In what manner did it "not work"?  I use it all the time, and it most
assuredly *does* work.
 
> --exec-prefix=/myplace/sun_os5
> --mandir=/myotherplace/man
> --libdir=/myplace/sun_os5
> 
> However that didn't work as I wanted it to because it went and created
> 
> /myplace/sun_os5/bin  (for the binaries)

Yes, that's the correct behaviour.  Notice that it is exec *PREFIX*!  The
binaries go in ${exec_prefix}/bin.

> and /myplace/sun_os5/fvwm2 (for the modules) 

Again correct.  Fvwm, like many software packages that install multiple
files into lib, creates a subdirectory (${libdir}/${packagename}) to hold
them all.
 
> > * there used to be an option to install the stuff in the sample.fvwmrc
> > directory; since _not_ installing is the common case, I removed this; 
> > hence one has to install them by hand the first time
> 
> The  documentation refers the  user to this file.  I  just took a look
> and it doesn't seem to say where  it is.  I  would be nice if the make
> procedure updated the man pages with the full path name.

Yes, that's a good idea: the man pages can be generated to substitute the
full pathnames for everything that gets installed: config file, modules,
etc.

> I think this file should be installed, perhaps in the bin? 

It should definitely not be installed into bin: it is a configuration
file.  

My preference is to put it with all the other config files: in /etc or
${prefix}/etc.  The latest Filesystem Hierarchy Standard
(http://www.pathname.com/fhs/) suggests /etc/X11, which I also like. 
 
> > * is there a reason for separating modules into "modules" and "extras"?  I
> > didn't touch the extras, so they have to be built the old way, which may
> > be harder if Fvwm.tmpl is gone; is it worth the bother of autconfiguring
> > them?  (It's on my list of things to do)
> 
> I  think   there are 2 reasons   for  a module  to  be  in  the extras
> directory,  either its not   fully  debugged, or  the  install process
> hasn't been fully worked out.

OK, but suppose I can work out the configuration bugs.  Then configure
should at least set up the makefiles to allow them to optionally be built
(i.e. "cd extras/foo; make") and optionally installed.

> > * there are way too many compile-time options: are they really needed, or
> > can they be made run-time options?
> 
> I think you  are refering to  the options like "GRADIENT_BUTTONS".  

Yes, exactly.

> In my opinion they are compile time options because fvwm2 is trying to
> stay true to its original design goal of being a small efficient window
> manager. 

Yes, I suppose.  I should compile with them all off some day and see if it
makes any difference.

> I personally compile in all the options, but I think it would be nice to
> document the way to turn them off.
> 
> 
> The compile option was "-g" by default.  I think it should be "-O"?

Configure attempts to detect whether the compiler accepts both "-g and -O" 
together; if so, CFLAGS is set to "-g -O", ("-g -O2" for gcc) and
otherwise just to "-g".  Apparently, configure feels that your compiler
does not accept them both together.  If this is a bug, a note of it should
be submitted to the autoconf maintainers.

The CFLAGS are set for debugging by default.  This is a GNU standard, and
I think its a good one.  If you don't need debugging info, you can set
CFLAGS=-O and *either* configure *or* compile time.

--
Steve Robbins                              <steve@nyongwa.montreal.qc.ca>

Don't play cards with the Devil.  He'll deal you an awful hand.

--
Visit the official FVWM web page at <URL:http://www.hpc.uh.edu/fvwm/>.
To unsubscribe from the list, send "unsubscribe fvwm-workers" in the
body of a message to majordomo@hpc.uh.edu.
To report problems, send mail to fvwm-workers-owner@hpc.uh.edu.

