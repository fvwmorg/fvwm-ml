<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>FVWM: FvwmIconMan Bug? from Bill Rugolsky Jr. on 1996-12-23 (fvwm-users)</title>
<meta name="Author" content="Bill Rugolsky Jr. (rugolsky_at_ead.dsa.com)" />
<meta name="Subject" content="FVWM: FvwmIconMan Bug?" />
<meta name="Date" content="1996-12-23" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<h1>FVWM: FvwmIconMan Bug?</h1>
<!-- received="Mon Dec 23 15:16:49 1996" -->
<!-- isoreceived="19961223151649" -->
<!-- sent="Mon, 23 Dec 1996 15:45:26 -0500 (EST)" -->
<!-- isosent="19961223204526" -->
<!-- name="Bill Rugolsky Jr." -->
<!-- email="rugolsky_at_ead.dsa.com" -->
<!-- subject="FVWM: FvwmIconMan Bug?" -->
<!-- id="9612232045.AA22217_at_ead17.ead.dsa.com" -->
<!-- charset="US-ASCII" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start18773" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="18774.html" accesskey="d" title="Allen Brady Montz: &quot;Re: FVWM: FvwmIconMan Bug?&quot;">Next message</a> ]
[ <a href="18772.html" title="Stan Brown: &quot;FVWM: fvwm -&#0062; fvwm2rc conversion problems, more info&quot;">Previous message</a> ]
<!-- unextthread="start" -->
[ <a href="18774.html" accesskey="t" title="Allen Brady Montz: &quot;Re: FVWM: FvwmIconMan Bug?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#msg18773" title="Contemporary messages by date">by date</a> ] [ <a href="index.html#msg18773" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg18773" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg18773" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Bill Rugolsky Jr. &lt;<a href="mailto:rugolsky_at_ead.dsa.com?Subject=Re%3A%20FVWM%3A%20FvwmIconMan%20Bug%3F">rugolsky_at_ead.dsa.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Mon, 23 Dec 1996 15:45:26 -0500 (EST)</span><br />
</address>
<br />
I are currently migrating from vtwm to fvwm-2.0.43 on SunOS 4.1.3 and
<br />
Solaris 2.5.1.  My enviroments are as follows:
<br />
<br />&nbsp;VERSION: fvwm-2.0.43, FvwmIconMan 0.9 (and prior)
<br />
COMPILER: gcc-2.7.2
<br />
&nbsp;OPTIONS: -O2 -DSHAPE -DPIXMAP_BUTTONS -DXPM
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OS: SunOS 4.1.4           OS: SunOS 5.5.1
<br />
&nbsp;&nbsp;SERVER: MIT X11R5         SERVER: Sun Microsystems, Inc. 3.51
<br />
<br />In the process of migrating, I have uncovered the following problems
<br />
with FvwmIconMan:
<br />
<br />1. The configuration option:
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*FvwmIconMan*resolution page
<br />
<br />causes FvwmIconMan to exhibit buggy behavior when switching pages; in
<br />
particular, there appears to be an off-by-one error in the viewport
<br />
bounds-checking logic.  This bug causes a window that abuts the edge
<br />
of the screen to appear in the icon manager on multiple pages.  I
<br />
traced the bug to the function win_in_viewport() in file
<br />
modules/FvwmIconMan/fvwm.c .   Rather than attempt to debug the logic,
<br />
I just simplified it.  The new function definition and context diff are
<br />
appended to this message.
<br />
<br />2. There appears to be a problem with the &quot;dontshow&quot; configuration
<br />
option.  We have a misbehaving news application that continuously
<br />
updates the icon name and title with progress information.  This produces
<br />
unpleasant behavior, particularly over ISDN.  I tried using the following
<br />
lines in my .fvwm2rc to suppress the headline window in the icon manager:
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;Style &quot;*Query*Headline*&quot; Icon news.xpm
<br />
&nbsp;&nbsp;&nbsp;&nbsp;Style &quot;*received*of*&quot; Icon news.xpm
<br />
&nbsp;&nbsp;&nbsp;&nbsp;*FvwmIconMan*dontshow *Query*Headline*
<br />
&nbsp;&nbsp;&nbsp;&nbsp;*FvwmIconMan*dontshow *received*of*
<br />
<br />This has the desired effect upon starting the application.  However, if
<br />
I iconify the window, it suddenly appears in the icon manager.  Under
<br />
FvwmIconMan-0.5, it remained in the icon manager.  Using FvwmIconMan-0.9,
<br />
the icon is removed from the icon manager when it is de-iconified.  I tried
<br />
creating separate lines with title= and icon= before the patterns, but
<br />
this did not affect the behavior.  I have successfully worked around the
<br />
problem by using the &quot;WindowListSkip&quot; style for these patterns, in place
<br />
of the &quot;dontshow&quot; option to FvwmIconMan.
<br />
<br />Many thanks to everyone who has worked to make Fvwm the best window
<br />
manager available!
<br />
<br />Sincerely,
<br />
<br />&nbsp;&nbsp;&nbsp;Bill Rugolsky
<br />
&nbsp;&nbsp;&nbsp;Daiwa Securities America, Inc.
<br />
&nbsp;&nbsp;&nbsp;rugolsky_at_ead.dsa.com
<br />
<br />--------------------------------------------------------------------------------
<br />
<br />static int win_in_viewport (WinData *win)
<br />
{
<br />
&nbsp;&nbsp;WinManager *manager = win-&gt;manager;
<br />
&nbsp;&nbsp;int flag = 0;
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;assert (manager);
<br />
<br />&nbsp;&nbsp;switch (manager-&gt;res) {
<br />
&nbsp;&nbsp;case SHOW_GLOBAL:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;flag = 1;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;break;
<br />
<br />&nbsp;&nbsp;case SHOW_DESKTOP:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;if (win-&gt;sticky || win-&gt;desknum == globals.desknum)
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag = 1;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;break;
<br />
<br />&nbsp;&nbsp;case SHOW_PAGE:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;if (win-&gt;sticky) {
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag = 1;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;} else if (win-&gt;desknum == globals.desknum) {
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* win and screen intersect if they are not disjoint in x and y */
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag = !((win-&gt;x+win-&gt;width &lt;= 0)  || (win-&gt;x &gt;= (long)globals.screenx) ||
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(win-&gt;y+win-&gt;height &lt;= 0) || (win-&gt;y &gt;= (long)globals.screeny));
<br />
&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;&nbsp;&nbsp;break;
<br />
&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;return flag;
<br />
}
<br />
<br /><br />------------------------------ cut here ----------------------------------------
<br />
*** fvwm.c.orig	Sun Dec  8 16:34:02 1996
<br />
--- fvwm.c	Mon Dec 23 12:41:07 1996
<br />
***************
<br />
*** 145,151 ****
<br />
&nbsp;&nbsp;static int win_in_viewport (WinData *win)
<br />
&nbsp;&nbsp;{
<br />
&nbsp;&nbsp;&nbsp;&nbsp;WinManager *manager = win-&gt;manager;
<br />
-   long xmin, xmax, ymin, ymax;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;int flag = 0;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;assert (manager);
<br />
--- 145,150 ----
<br />
***************
<br />
*** 161,269 ****
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;case SHOW_PAGE:
<br />
- #if 0
<br />
-     if (win-&gt;sticky || (win-&gt;desknum == globals.desknum &amp;&amp; 
<br />
- 			win-&gt;x &gt;= 0 &amp;&amp; win-&gt;x &lt; globals.screenx &amp;&amp;
<br />
- 			win-&gt;y &gt;= 0 &amp;&amp; win-&gt;y &lt; globals.screeny))
<br />
-     {
<br />
-     }
<br />
- #endif
<br />
-     xmin = win-&gt;x;
<br />
-     xmax = win-&gt;x + win-&gt;width;
<br />
-     ymin = win-&gt;y;
<br />
-     ymax = win-&gt;y + win-&gt;height;
<br />
- 
<br />
-     /* cases: (1) one of the corners is inside screen - handled here
<br />
-               (2) one of the edges intersects an edge of the screen
<br />
- 	      (3) (1) with window and screen reversed
<br />
-      */
<br />
- 
<br />
- /*  case 1:
<br />
- 
<br />
-     xmin &gt;= 0 &amp;&amp; xmin &lt; screex &amp;&amp; ymin &gt;= 0 &amp;&amp; ymin &lt;= screeny
<br />
-       ||
<br />
-     xmin &gt;= 0 &amp;&amp; xmin &lt; screex &amp;&amp; ymax &gt;= 0 &amp;&amp; ymax &lt;= screeny
<br />
-       ||
<br />
-     xmax &gt;= 0 &amp;&amp; xmax &lt; screex &amp;&amp; ymin &gt;= 0 &amp;&amp; ymin &lt;= screeny
<br />
-       ||
<br />
-     xmax &gt;= 0 &amp;&amp; xmax &lt; screex &amp;&amp; ymax &gt;= 0 &amp;&amp; ymax &lt;= screeny
<br />
- 
<br />
- goes to:
<br />
- 
<br />
-     xmin &amp;&amp; (ymin || ymax)
<br />
-       ||
<br />
-     xmax &amp;&amp; (ymin || ymax)
<br />
- 
<br />
- goes to:
<br />
- 
<br />
-     (xmin || xmax) &amp;&amp; (ymin || max)
<br />
- 
<br />
- */
<br />
- 
<br />
- /*  Case 2:
<br />
-     
<br />
-     xmin &lt;= 0 &amp;&amp; xmax &gt;= 0 &amp;&amp; ymin &gt;= 0 &amp;&amp; ymin &lt;= screeny ||
<br />
-     xmin &lt;= screenx &amp;&amp; xman &gt;= screenx &amp;&amp; ymin &gt;= 0 &amp;&amp; ymin &lt;= screeny ||
<br />
-     ymin &lt;= 0 &amp;&amp; ymax &gt;= 0 &amp;&amp; xmin &gt;= 0 &amp;&amp; xmax &lt;= screenx ||
<br />
-     ymin &lt;= screeny &amp;&amp; ymax &gt;= screeny &amp;&amp; xmin &gt;= 0 &amp;&amp; xmax &lt;= screenx
<br />
- 
<br />
- goes to:
<br />
- 
<br />
-     (ymin &gt;= 0 &amp;&amp; ymin &lt;= screeny) &amp;&amp; 
<br />
-           (xmin &lt;= 0 &amp;&amp; xmax &gt;= 0 || xmin &lt;= screenx &amp;&amp; xmax &gt;= screenx) ||
<br />
-     (xmin &gt;= 0 &amp;&amp; xmax &lt;= screenx) &amp;&amp;
<br />
-           (ymin &lt;= 0 &amp;&amp; ymax &gt;= 0 || ymin &lt;= screeny &amp;&amp; ymax &gt;= screeny)
<br />
-        
<br />
- */
<br />
- 
<br />
-     ConsoleDebug (&quot;Screenx = %d, Screeny = %d\n&quot;, globals.screenx,
<br />
- 		  globals.screeny);
<br />
-     ConsoleDebug (&quot;Window (%s) coords: (%d, %d), (%d, %d)\n&quot;, win-&gt;iconname, xmin, ymin, xmax, ymax);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (win-&gt;sticky) {
<br />
-       ConsoleDebug (&quot;Sticky\n&quot;);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag = 1;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
!     else if (win-&gt;desknum == globals.desknum) {
<br />
!       if (((xmin &gt;= 0 &amp;&amp; xmin &lt; globals.screenx) ||
<br />
! 	   (xmax &gt;= 0 &amp;&amp; xmax &lt; globals.screenx)) &amp;&amp;
<br />
! 	  ((ymin &gt;= 0 &amp;&amp; ymin &lt; globals.screeny) ||
<br />
! 	   (ymax &gt;= 0 &amp;&amp; ymax &lt; globals.screeny))) {
<br />
! 	ConsoleDebug (&quot;Window in screen\n&quot;);
<br />
! 	flag = 1;
<br />
!       }
<br />
!       else if (((ymin &gt;= 0 &amp;&amp; ymin &lt; globals.screeny) &amp;&amp; 
<br />
! 	       ((xmin &lt;= 0 &amp;&amp; xmax &gt;= 0) || 
<br />
! 		(xmin &lt; globals.screenx &amp;&amp; xmax &gt;= globals.screenx))) ||
<br />
! 	       ((xmin &gt;= 0 &amp;&amp; xmax &lt;= globals.screenx) &amp;&amp;
<br />
! 	       ((ymin &lt;= 0 &amp;&amp; ymax &gt;= 0) || 
<br />
! 		(ymin &lt; globals.screeny &amp;&amp; ymax &gt;= globals.screeny)))) {
<br />
! 	ConsoleDebug (&quot;Screen - window cross\n&quot;);
<br />
! 	flag = 1;
<br />
!       }
<br />
!       else if (((0 &gt; xmin &amp;&amp; 0 &lt; xmax) ||
<br />
! 		(globals.screenx &gt; xmin &amp;&amp; globals.screenx &lt; xmax)) &amp;&amp;
<br />
! 	       ((0 &gt; ymin &amp;&amp; 0 &lt; ymax) ||
<br />
! 		(globals.screeny &gt; 0 &amp;&amp; globals.screeny &lt; ymax))) {
<br />
! 	ConsoleDebug (&quot;Screen in window\n&quot;);
<br />
! 	flag = 1;
<br />
!       }
<br />
!       else {
<br />
! 	ConsoleDebug (&quot;Not in view\n&quot;);
<br />
! 	ConsoleDebug (&quot;xmin = %d\txmax = %d\n&quot;, xmin, xmax);
<br />
! 	ConsoleDebug (&quot;ymin = %d\tymax = %d\n&quot;, ymin, ymax);
<br />
! 	ConsoleDebug (&quot;screenx = %d\tscreeny = %d\n&quot;, globals.screenx, 
<br />
! 		      globals.screeny);
<br />
! 	ConsoleDebug (&quot;Expr: %d\n&quot;, 
<br />
! 		      ((0 &gt;= xmin &amp;&amp; 0) &lt; xmax ||
<br />
! 		       (globals.screenx &gt;= xmin &amp;&amp; globals.screenx &lt; xmax)) &amp;&amp;
<br />
! 		      ((0 &gt;= ymin &amp;&amp; 0 &lt; ymax) ||
<br />
! 		       (globals.screeny &gt;= 0 &amp;&amp; globals.screeny &lt; ymax)));
<br />
! 	  
<br />
!       }
<br />
!     }
<br />
!     else {
<br />
!       ConsoleDebug (&quot;Not on desk\n&quot;);
<br />
!     }
<br />
&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;&nbsp;&nbsp;return flag;
<br />
&nbsp;&nbsp;}
<br />
--- 160,173 ----
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
<br />
&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;case SHOW_PAGE:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (win-&gt;sticky) {
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag = 1;
<br />
+     } else if (win-&gt;desknum == globals.desknum) {
<br />
+       /* win and screen intersect if they are not disjoint in x and y */
<br />
+       flag = !((win-&gt;x+win-&gt;width &lt;= 0)  || (win-&gt;x &gt;= (long)globals.screenx) ||
<br />
+ 	       (win-&gt;y+win-&gt;height &lt;= 0) || (win-&gt;y &gt;= (long)globals.screeny));
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
!     break;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;}
<br />
&nbsp;&nbsp;&nbsp;&nbsp;return flag;
<br />
&nbsp;&nbsp;}
<br />
<pre>
--
Visit the official FVWM web page at &lt;URL:<a href="http://www.hpc.uh.edu/fvwm/">http://www.hpc.uh.edu/fvwm/</a>&gt;.
To unsubscribe from the list, send &quot;unsubscribe fvwm&quot; in the body of a
message to majordomo_at_hpc.uh.edu.
To report problems, send mail to fvwm-owner_at_hpc.uh.edu.
</pre>
<span id="received"><dfn>Received on</dfn> Mon Dec 23 1996 - 15:16:49 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start18773">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="18774.html" title="Next message in the list">Allen Brady Montz: "Re: FVWM: FvwmIconMan Bug?"</a></li>
<li><dfn>Previous message</dfn>: <a href="18772.html" title="Previous message in the list">Stan Brown: "FVWM: fvwm -&#0062; fvwm2rc conversion problems, more info"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="18774.html" title="Next message in this discussion thread">Allen Brady Montz: "Re: FVWM: FvwmIconMan Bug?"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="18774.html" title="Message sent in reply to this message">Allen Brady Montz: "Re: FVWM: FvwmIconMan Bug?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#msg18773" title="Contemporary messages by date">by date</a> ] [ <a href="index.html#msg18773" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg18773" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg18773" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Mon Aug 29 2016 - 19:37:59 BST
</em></small></p>
</body>
</html>
